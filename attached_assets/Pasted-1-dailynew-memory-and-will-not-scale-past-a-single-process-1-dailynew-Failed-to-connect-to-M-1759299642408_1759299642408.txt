1|dailynew | memory, and will not scale past a single process.
1|dailynew | ❌ Failed to connect to MySQL VPS database:
1|dailynew |    Error: Error: Database name is required
1|dailynew | ⚠️ No database configured, using in-memory storage for development
1|dailynew | 💡 Set MYSQL_URL environment variable to use a database
1|dailynew | Warning: connect.session() MemoryStore is not
1|dailynew | designed for a production environment, as it will leak
1|dailynew | memory, and will not scale past a single process.
1|dailynew | ❌ Failed to connect to MySQL VPS database:
1|dailynew |    Error: Error: Database name is required
1|dailynew | ⚠️ No database configured, using in-memory storage for development
1|dailynew | 💡 Set MYSQL_URL environment variable to use a database
1|dailynew | Warning: connect.session() MemoryStore is not
1|dailynew | designed for a production environment, as it will leak
1|dailynew | memory, and will not scale past a single process.
1|dailynew | ❌ Failed to connect to MySQL VPS database:
1|dailynew |    Error: Error: Database name is required
1|dailynew | ⚠️ No database configured, using in-memory storage for development
1|dailynew | 💡 Set MYSQL_URL environment variable to use a database

/var/www/dailynewscrypto.net/logs/error-7.log last 100 lines:
7|mapestat | 2025-09-30 19:22:56 +00:00: ❌ Failed to connect to MySQL VPS database:7|mapestat | 2025-09-30 19:22:56 +00:00:    Error: Error: Database name is required
7|mapestat | 2025-09-30 19:22:56 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-09-30 19:22:56 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-09-30 19:22:56 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-09-30 19:22:56 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-09-30 19:22:56 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-09-30 19:23:02 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-09-30 19:23:02 +00:00:    Error: Error: Database name is required
7|mapestat | 2025-09-30 19:23:02 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-09-30 19:23:02 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-09-30 19:23:02 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-09-30 19:23:02 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-09-30 19:23:02 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-10-01 03:16:06 +00:00: Error generating sitemap: TypeError: Cannot read properties of undefined (reading 'getProperties')
7|mapestat | 2025-10-01 03:16:06 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:2599:39
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Layer.handle [as handle_request] (/var/www/dailynewscrypto.net/node_modules/express/lib/router/layer.js:95:5)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at next (/var/www/dailynewscrypto.net/node_modules/express/lib/router/route.js:149:13)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Route.dispatch (/var/www/dailynewscrypto.net/node_modules/express/lib/router/route.js:119:3)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Layer.handle [as handle_request] (/var/www/dailynewscrypto.net/node_modules/express/lib/router/layer.js:95:5)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at /var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:284:15
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.process_params (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:346:12)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at next (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:280:10)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.handle (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:175:3)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at router (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:47:12)

/var/www/dailynewscrypto.net/logs/out-7.log last 100 lines:
7|mapestat | 2025-09-30 20:14:05 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:14:20 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:14:35 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:14:50 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:15:05 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:15:20 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:15:35 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:15:50 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:16:05 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:16:20 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:16:35 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:16:50 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:17:05 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:17:20 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:17:35 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:17:50 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:18:05 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-09-30 20:18:18 +00:00: 🔌 SSE client disconnected (error): aborted
7|mapestat | 2025-09-30 20:18:18 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 20:18:18 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-09-30 20:18:18 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 20:18:18 +00:00: GET /api/auth/me 401 in 0ms : {"message":"Unauthorized"}
7|mapestat | 2025-09-30 20:18:19 +00:00: GET /api/properties/featured 200 in 1ms : []
7|mapestat | 2025-09-30 20:18:20 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:18:35 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-09-30 20:19:08 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:19:27 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:19:42 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-09-30 20:19:59 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:20:17 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:20:32 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-09-30 20:20:48 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-09-30 20:21:04 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:21:19 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-09-30 20:21:39 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 20:21:57 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:22:31 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:22:46 +00:00: GET /api/properties 304 in 0ms : []
7|mapestat | 2025-09-30 20:23:20 +00:00: GET /api/properties 200 in 2ms : []
7|mapestat | 2025-09-30 20:23:35 +00:00: GET /api/properties 304 in 0ms : []
7|mapestat | 2025-09-30 20:24:42 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:24:57 +00:00: GET /api/properties 304 in 2ms : []
7|mapestat | 2025-09-30 20:28:35 +00:00: GET /api/properties 200 in 3ms : []
7|mapestat | 2025-09-30 20:28:50 +00:00: GET /api/properties 304 in 0ms : []
7|mapestat | 2025-09-30 20:30:28 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:35:48 +00:00: GET /api/properties 200 in 4ms : []
7|mapestat | 2025-09-30 20:36:06 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 20:37:09 +00:00: GET /api/properties 200 in 2ms : []
7|mapestat | 2025-09-30 20:37:41 +00:00: GET /api/properties 200 in 2ms : []
7|mapestat | 2025-09-30 20:59:37 +00:00: GET /api/properties/featured 200 in 2ms : []
7|mapestat | 2025-09-30 20:59:37 +00:00: 🔌 New SSE connection established
7|mapestat | 2025-09-30 20:59:37 +00:00: 📡 SSE padding sent, forcing stream start
7|mapestat | 2025-09-30 20:59:37 +00:00: 📡 SSE initial connection message sent and flushed
7|mapestat | 2025-09-30 20:59:37 +00:00: 📊 SSE clients connected: 1
7|mapestat | 2025-09-30 20:59:38 +00:00: 🔌 SSE client disconnected (error): aborted
7|mapestat | 2025-09-30 20:59:38 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 20:59:38 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-09-30 20:59:38 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 20:59:39 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 21:49:54 +00:00: GET /api/auth/me 401 in 0ms : {"message":"Unauthorized"}
7|mapestat | 2025-09-30 21:49:54 +00:00: 🔌 New SSE connection established
7|mapestat | 2025-09-30 21:49:54 +00:00: 📡 SSE padding sent, forcing stream start
7|mapestat | 2025-09-30 21:49:54 +00:00: 📡 SSE initial connection message sent and flushed
7|mapestat | 2025-09-30 21:49:54 +00:00: 📊 SSE clients connected: 1
7|mapestat | 2025-09-30 21:49:55 +00:00: GET /api/properties 200 in 2ms : []
7|mapestat | 2025-09-30 21:50:01 +00:00: 🔌 SSE client disconnected (error): aborted
7|mapestat | 2025-09-30 21:50:01 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 21:50:01 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-09-30 21:50:01 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-09-30 22:06:02 +00:00: GET /api/properties 200 in 2ms : []
7|mapestat | 2025-09-30 22:06:08 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:10 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:06:15 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:06:17 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:29 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:36 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:44 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:03 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:24 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:27 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:07:28 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-10-01 02:55:26 +00:00: GET /api/auth/me 401 in 1ms : {"message":"Unauthorized"}
7|mapestat | 2025-10-01 04:43:34 +00:00: 🔌 New SSE connection established
7|mapestat | 2025-10-01 04:43:34 +00:00: 📡 SSE padding sent, forcing stream start
7|mapestat | 2025-10-01 04:43:34 +00:00: 📡 SSE initial connection message sent and flushed
7|mapestat | 2025-10-01 04:43:34 +00:00: 📊 SSE clients connected: 1
7|mapestat | 2025-10-01 04:43:34 +00:00: GET /api/properties 200 in 3ms : []
7|mapestat | 2025-10-01 04:43:49 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-10-01 04:44:04 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-10-01 04:44:19 +00:00: 🔌 SSE client disconnected (error): aborted
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 04:44:19 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/auth/me 401 in 5ms : {"message":"Unauthorized"}
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties/featured 304 in 0ms
7|mapestat | 2025-10-01 05:51:24 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:51:43 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-10-01 05:51:59 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:52:51 +00:00: GET /api/properties 200 in 0ms : []

/root/.pm2/logs/dailynewscrypto-out.log last 100 lines:
1|dailynew | 7:15:14 PM [vite] page reload src/lib/sitemap.ts
1|dailynew | 7:15:14 PM [vite] page reload src/lib/slug-utils.ts
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/tooltip.tsx, /src/index.css?v=_a4w7RRDWxDO_j-y-U0Pc, /src/components/ui/alert.tsx, /src/components/ui/button.tsx, /src/components/ui/toast.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/index.css?v=_a4w7RRDWxDO_j-y-U0Pc
1|dailynew | 7:15:14 PM [vite] page reload src/components/currency-selector.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/contact-form.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/AuthProvider.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/menubar.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/accordion.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/alert-dialog.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/alert.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/aspect-ratio.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/avatar.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/badge.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/breadcrumb.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/button.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/calendar.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/card.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/carousel.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/chart.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/checkbox.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/collapsible.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/command.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/context-menu.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/dialog.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/drawer.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/dropdown-menu.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/form.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/hover-card.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/input-otp.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/input.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/label.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/navigation-menu.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/optimized-image.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/pagination.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/popover.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/progress.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/radio-group.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/resizable.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/scroll-area.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/select.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/separator.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/sheet.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/sidebar.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/skeleton.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/slider.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/switch.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/table.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/tabs.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/textarea.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/toast.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/toaster.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/toggle-group.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ui/toggle.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ui/tooltip.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/typography-showcase.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/location-selection-map.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/image-upload.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/NetworkStatus.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/property-map.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/settings-modal.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/property-card.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/language-selection-modal.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/ErrorBoundary.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/profile-photo-upload.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/Redirect.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/ProtectedRoute.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/search-bar.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/CustomerAnalytics.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/SEOHead.tsx
1|dailynew | 7:15:14 PM [vite] hmr update /src/components/LoadingSpinner.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/components/GlobalLoader.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/main.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/types/index.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/useNetworkError.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/use-currency-rates.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/use-mobile.tsx
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/use-properties.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/use-toast.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/useAuth.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/useNetworkStatus.ts
1|dailynew | 7:15:14 PM [vite] page reload src/hooks/usePropertyEvents.ts
1|dailynew | 7:15:14 PM [vite] page reload index.html
1|dailynew | 7:15:15 PM [vite] changed tsconfig file detected: /var/www/dailynewscrypto.net/tsconfig.json - Clearing cache and forcing full-reload to ensure TypeScript is compiled with updated config values.
1|dailynew | 7:15:15 PM [vite] page reload /var/www/dailynewscrypto.net/tailwind.config.ts
1|dailynew | GET /api/properties 200 in 20ms : [{"id":"405367ad-df65-4cac-a70c-f2ddf6c522fc"…
1|dailynew | GET /api/properties 200 in 8ms : [{"id":"405367ad-df65-4cac-a70c-f2ddf6c522fc",…
1|dailynew | GET /api/auth/user 200 in 20ms
1|dailynew | GET /api/status 200 in 7ms
1|dailynew | GET /api/properties 500 in 18ms : {"message":"Failed to fetch properties"}
1|dailynew | GET /api/auth/me 401 in 2ms : {"message":"Unauthorized"}
1|dailynew | GET /api/properties 500 in 10ms : {"message":"Failed to fetch properties"}
1|dailynew | GET /api/properties 200 in 10ms : []
1|dailynew | GET /api/auth/me 401 in 0ms : {"message":"Unauthorized"}
1|dailynew | POST /api/auth/login 200 in 311ms : {"user":{"id":"84c54b70-5724-4aef-8302-32cb…
1|dailynew | GET /api/properties 500 in 9ms : {"message":"Failed to fetch properties"}
1|dailynew | GET /api/auth/me 401 in 1ms : {"message":"Unauthorized"}
1|dailynew | GET /api/properties 200 in 3ms : []
1|dailynew | GET /api/users 200 in 4ms
1|dailynew | GET /api/auth/login 200 in 2ms

^C
[TAILING] Tailing last 50 lines for [app-name] process (change the value with --lines option)
^X^C
root@srv1027249:~# # Stop the current app
pm2 stop mapestate-api

# Set environment variables and restart
MYSQL_HOST=72.60.134.44 \
MYSQL_USER=mapestate \
MYSQL_DATABASE=mapestate \
MYSQL_PORT=3306 \
MYSQL_PASSWORD=aB3!x8G#pQ2$mK9* \
pm2 restart mapestate-api --update-env
[PM2] Applying action stopProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
│ 7  │ mapestate-api      │ fork     │ 1    │ stopped   │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
-bash: !x8G#pQ2: event not found
[PM2] Applying action restartProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
│ 7  │ mapestate-api      │ fork     │ 1    │ online    │ 0%       │ 17.1mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:~# pm2 start ecosystem.config.js
[PM2][ERROR] File ecosystem.config.js not found
root@srv1027249:~# cat > /var/www/dailynewscrypto.net/ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: "mapestate-api",
    script: "./dist/index.js",
    env: {
      NODE_ENV: "production",
      MYSQL_HOST: "127.0.0.1",
      MYSQL_USER: "mapestate",
      MYSQL_PASSWORD: "aB3!x8G#pQ2$mK9*",
      MYSQL_DATABASE: "mapestate",
      MYSQL_PORT: "3306"
    }
  }]
};
EOF

pm2 restart mapestate-api --update-env
pm2 logs mapestate-api --lines 50
[PM2] Applying action restartProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
│ 7  │ mapestate-api      │ fork     │ 2    │ online    │ 0%       │ 11.6mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 50 lines for [mapestate-api] process (change the value with --lines option)
/var/www/dailynewscrypto.net/logs/error-7.log last 50 lines:
7|mapestat | 2025-09-30 19:22:56 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-09-30 19:22:56 +00:00:    Error: Error: Database name is required
7|mapestat | 2025-09-30 19:22:56 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-09-30 19:22:56 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-09-30 19:22:56 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-09-30 19:22:56 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-09-30 19:22:56 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-09-30 19:23:02 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-09-30 19:23:02 +00:00:    Error: Error: Database name is required
7|mapestat | 2025-09-30 19:23:02 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-09-30 19:23:02 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-09-30 19:23:02 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-09-30 19:23:02 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-09-30 19:23:02 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-10-01 03:16:06 +00:00: Error generating sitemap: TypeError: Cannot read properties of undefined (reading 'getProperties')
7|mapestat | 2025-10-01 03:16:06 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:2599:39
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Layer.handle [as handle_request] (/var/www/dailynewscrypto.net/node_modules/express/lib/router/layer.js:95:5)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at next (/var/www/dailynewscrypto.net/node_modules/express/lib/router/route.js:149:13)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Route.dispatch (/var/www/dailynewscrypto.net/node_modules/express/lib/router/route.js:119:3)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Layer.handle [as handle_request] (/var/www/dailynewscrypto.net/node_modules/express/lib/router/layer.js:95:5)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at /var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:284:15
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.process_params (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:346:12)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at next (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:280:10)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.handle (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:175:3)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at router (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:47:12)
7|mapestat | 2025-10-01 06:11:23 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestat | 2025-10-01 06:11:23 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestat | 2025-10-01 06:11:23 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestat | 2025-10-01 06:11:23 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestat | 2025-10-01 06:11:23 +00:00:   errno: 1045,
7|mapestat | 2025-10-01 06:11:23 +00:00:   sql: undefined,
7|mapestat | 2025-10-01 06:11:23 +00:00:   sqlState: '28000',
7|mapestat | 2025-10-01 06:11:23 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestat | 2025-10-01 06:11:23 +00:00: }
7|mapestat | 2025-10-01 06:11:23 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:11:23 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:11:23 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:11:23 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:11:23 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:11:23 +00:00: memory, and will not scale past a single process.

/var/www/dailynewscrypto.net/logs/out-7.log last 50 lines:
7|mapestat | 2025-09-30 22:06:08 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:10 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:06:15 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:06:17 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:29 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:36 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:06:44 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:03 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:24 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-09-30 22:07:27 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-09-30 22:07:28 +00:00: GET /api/properties 304 in 1ms : []
7|mapestat | 2025-10-01 02:55:26 +00:00: GET /api/auth/me 401 in 1ms : {"message":"Unauthorized"}
7|mapestat | 2025-10-01 04:43:34 +00:00: 🔌 New SSE connection established
7|mapestat | 2025-10-01 04:43:34 +00:00: 📡 SSE padding sent, forcing stream start
7|mapestat | 2025-10-01 04:43:34 +00:00: 📡 SSE initial connection message sent and flushed
7|mapestat | 2025-10-01 04:43:34 +00:00: 📊 SSE clients connected: 1
7|mapestat | 2025-10-01 04:43:34 +00:00: GET /api/properties 200 in 3ms : []
7|mapestat | 2025-10-01 04:43:49 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-10-01 04:44:04 +00:00: 💓 SSE heartbeat sent and flushed
7|mapestat | 2025-10-01 04:44:19 +00:00: 🔌 SSE client disconnected (error): aborted
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 04:44:19 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/auth/me 401 in 5ms : {"message":"Unauthorized"}
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties/featured 304 in 0ms
7|mapestat | 2025-10-01 05:51:24 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:51:43 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-10-01 05:51:59 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:52:51 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔍 Environment Variables Debug:
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_URL: [NOT SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_HOST: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_USER: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_DATABASE: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_PORT: 3306
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔗 Database configuration:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:11:23 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:11:23 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:11:23 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:11:23 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:11:23 +00:00: 6:11:23 AM [express] serving on port 3000

7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔍 Environment Variables Debug:
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_URL: [NOT SET]
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_HOST: [SET]
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_USER: [SET]
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_DATABASE: [SET]
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_PORT: 3306
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔗 Database configuration:
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    Host: 72.60.134.44:3306
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    User: mapestate
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    Database: mapestate
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: ✅ MySQL VPS connection established successfully
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔍 Testing database connection...
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:   errno: 1045,
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:   sql: undefined,
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:   sqlState: '28000',
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: }
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestate-api  | 2025-10-01 06:12:53 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: Warning: connect.session() MemoryStore is not
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: designed for a production environment, as it will leak
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: memory, and will not scale past a single process.
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestate-api  | 2025-10-01 06:12:53 +00:00: 6:12:53 AM [express] serving on port 3000
clear
^X^C
root@srv1027249:~# cat > /var/www/dailynewscrypto.net/ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: "mapestate-api",
    script: "./dist/index.js",
    env: {
      NODE_ENV: "production",
      MYSQL_HOST: "127.0.0.1",
      MYSQL_USER: "mapestate",
      MYSQL_PASSWORD: "aB3!x8G#pQ2$mK9*",
      MYSQL_DATABASE: "mapestate",
      MYSQL_PORT: "3306"
    }
  }]
};
EOF

pm2 restart mapestate-api --update-env
pm2 logs mapestate-api --lines 50
[PM2] Applying action restartProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
│ 7  │ mapestate-api      │ fork     │ 3    │ online    │ 0%       │ 12.8mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 50 lines for [mapestate-api] process (change the value with --lines option)
/var/www/dailynewscrypto.net/logs/error-7.log last 50 lines:
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Layer.handle [as handle_request] (/var/www/dailynewscrypto.net/node_modules/express/lib/router/layer.js:95:5)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at /var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:284:15
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.process_params (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:346:12)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at next (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:280:10)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at Function.handle (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:175:3)
7|mapestat | 2025-10-01 03:16:06 +00:00:     at router (/var/www/dailynewscrypto.net/node_modules/express/lib/router/index.js:47:12)
7|mapestat | 2025-10-01 06:11:23 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestat | 2025-10-01 06:11:23 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestat | 2025-10-01 06:11:23 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestat | 2025-10-01 06:11:23 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestat | 2025-10-01 06:11:23 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestat | 2025-10-01 06:11:23 +00:00:   errno: 1045,
7|mapestat | 2025-10-01 06:11:23 +00:00:   sql: undefined,
7|mapestat | 2025-10-01 06:11:23 +00:00:   sqlState: '28000',
7|mapestat | 2025-10-01 06:11:23 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestat | 2025-10-01 06:11:23 +00:00: }
7|mapestat | 2025-10-01 06:11:23 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:11:23 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:11:23 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:11:23 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:11:23 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:11:23 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-10-01 06:12:53 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestat | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestat | 2025-10-01 06:12:53 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestat | 2025-10-01 06:12:53 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestat | 2025-10-01 06:12:53 +00:00:   errno: 1045,
7|mapestat | 2025-10-01 06:12:53 +00:00:   sql: undefined,
7|mapestat | 2025-10-01 06:12:53 +00:00:   sqlState: '28000',
7|mapestat | 2025-10-01 06:12:53 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestat | 2025-10-01 06:12:53 +00:00: }
7|mapestat | 2025-10-01 06:12:53 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-10-01 06:12:53 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:12:53 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:12:53 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:12:53 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:12:53 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:12:53 +00:00: memory, and will not scale past a single process.

/var/www/dailynewscrypto.net/logs/out-7.log last 50 lines:
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 04:44:19 +00:00: 🔌 SSE client disconnected (close)
7|mapestat | 2025-10-01 04:44:19 +00:00: 📊 SSE clients connected: 0
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/auth/me 401 in 5ms : {"message":"Unauthorized"}
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:50:51 +00:00: GET /api/properties/featured 304 in 0ms
7|mapestat | 2025-10-01 05:51:24 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:51:43 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-10-01 05:51:59 +00:00: GET /api/properties 200 in 1ms : []
7|mapestat | 2025-10-01 05:52:51 +00:00: GET /api/properties 200 in 0ms : []
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔍 Environment Variables Debug:
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_URL: [NOT SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_HOST: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_USER: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_DATABASE: [SET]
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_PORT: 3306
7|mapestat | 2025-10-01 06:11:23 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔗 Database configuration:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:11:23 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:11:23 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:11:23 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:11:23 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:11:23 +00:00: 6:11:23 AM [express] serving on port 3000
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔍 Environment Variables Debug:
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_URL: [NOT SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_HOST: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_USER: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_DATABASE: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_PORT: 3306
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔗 Database configuration:
7|mapestat | 2025-10-01 06:12:53 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:12:53 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:12:53 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:12:53 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:12:53 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:12:53 +00:00: 6:12:53 AM [express] serving on port 3000

7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔍 Environment Variables Debug:
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_URL: [NOT SET]
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_HOST: [SET]
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_USER: [SET]
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_DATABASE: [SET]
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_PORT: 3306
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔗 Database configuration:
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    Host: 72.60.134.44:3306
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    User: mapestate
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    Database: mapestate
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: ✅ MySQL VPS connection established successfully
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔍 Testing database connection...
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:   errno: 1045,
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:   sql: undefined,
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:   sqlState: '28000',
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: }
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestate-api  | 2025-10-01 06:13:05 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: Warning: connect.session() MemoryStore is not
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: designed for a production environment, as it will leak
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: memory, and will not scale past a single process.
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestate-api  | 2025-10-01 06:13:05 +00:00: 6:13:05 AM [express] serving on port 3000
^C
root@srv1027249:~# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 47
Server version: 8.0.43-0ubuntu0.24.04.2 (Ubuntu)

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> ALTER USER 'mapestate'@'%' IDENTIFIED WITH mysql_native_password BY 'aB3!x8G#pQ2$mK9*';
Query OK, 0 rows affected (0.00 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT user, host, plugin FROM mysql.user WHERE user = 'mapestate';
+-----------+------+-----------------------+
| user      | host | plugin                |
+-----------+------+-----------------------+
| mapestate | %    | mysql_native_password |
+-----------+------+-----------------------+
1 row in set (0.00 sec)

mysql> EXIT;
Bye
root@srv1027249:~# cat > /var/www/dailynewscrypto.net/ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: "mapestate-api",
    script: "./dist/index.js",
    env: {
      NODE_ENV: "production",
      MYSQL_HOST: "127.0.0.1",
      MYSQL_USER: "mapestate",
      MYSQL_PASSWORD: "aB3!x8G#pQ2$mK9*",
      MYSQL_DATABASE: "mapestate",
      MYSQL_PORT: "3306"
    }
  }]
};
EOF

pm2 restart mapestate-api --update-env
pm2 logs mapestate-api --lines 50
[PM2] Applying action restartProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
│ 7  │ mapestate-api      │ fork     │ 4    │ online    │ 0%       │ 14.6mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 50 lines for [mapestate-api] process (change the value with --lines option)
/var/www/dailynewscrypto.net/logs/error-7.log last 50 lines:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:11:23 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:11:23 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:11:23 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:11:23 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:11:23 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-10-01 06:12:53 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestat | 2025-10-01 06:12:53 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestat | 2025-10-01 06:12:53 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestat | 2025-10-01 06:12:53 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestat | 2025-10-01 06:12:53 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestat | 2025-10-01 06:12:53 +00:00:   errno: 1045,
7|mapestat | 2025-10-01 06:12:53 +00:00:   sql: undefined,
7|mapestat | 2025-10-01 06:12:53 +00:00:   sqlState: '28000',
7|mapestat | 2025-10-01 06:12:53 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestat | 2025-10-01 06:12:53 +00:00: }
7|mapestat | 2025-10-01 06:12:53 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-10-01 06:12:53 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:12:53 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:12:53 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:12:53 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:12:53 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:12:53 +00:00: memory, and will not scale past a single process.
7|mapestat | 2025-10-01 06:13:05 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestat | 2025-10-01 06:13:05 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestat | 2025-10-01 06:13:05 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestat | 2025-10-01 06:13:05 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestat | 2025-10-01 06:13:05 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestat | 2025-10-01 06:13:05 +00:00:   errno: 1045,
7|mapestat | 2025-10-01 06:13:05 +00:00:   sql: undefined,
7|mapestat | 2025-10-01 06:13:05 +00:00:   sqlState: '28000',
7|mapestat | 2025-10-01 06:13:05 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestat | 2025-10-01 06:13:05 +00:00: }
7|mapestat | 2025-10-01 06:13:05 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestat | 2025-10-01 06:13:05 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestat | 2025-10-01 06:13:05 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestat | 2025-10-01 06:13:05 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestat | 2025-10-01 06:13:05 +00:00: Warning: connect.session() MemoryStore is not
7|mapestat | 2025-10-01 06:13:05 +00:00: designed for a production environment, as it will leak
7|mapestat | 2025-10-01 06:13:05 +00:00: memory, and will not scale past a single process.

/var/www/dailynewscrypto.net/logs/out-7.log last 50 lines:
7|mapestat | 2025-10-01 06:11:23 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:11:23 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:11:23 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:11:23 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:11:23 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:11:23 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:11:23 +00:00: 6:11:23 AM [express] serving on port 3000
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔍 Environment Variables Debug:
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_URL: [NOT SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_HOST: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_USER: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_DATABASE: [SET]
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_PORT: 3306
7|mapestat | 2025-10-01 06:12:53 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔗 Database configuration:
7|mapestat | 2025-10-01 06:12:53 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:12:53 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:12:53 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:12:53 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:12:53 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:12:53 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:12:53 +00:00: 6:12:53 AM [express] serving on port 3000
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔍 Environment Variables Debug:
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_URL: [NOT SET]
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_HOST: [SET]
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_USER: [SET]
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_DATABASE: [SET]
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_PORT: 3306
7|mapestat | 2025-10-01 06:13:05 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔗 Database configuration:
7|mapestat | 2025-10-01 06:13:05 +00:00:    Host: 72.60.134.44:3306
7|mapestat | 2025-10-01 06:13:05 +00:00:    User: mapestate
7|mapestat | 2025-10-01 06:13:05 +00:00:    Database: mapestate
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestat | 2025-10-01 06:13:05 +00:00: ✅ MySQL VPS connection established successfully
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔍 Testing database connection...
7|mapestat | 2025-10-01 06:13:05 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestat | 2025-10-01 06:13:05 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestat | 2025-10-01 06:13:05 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestat | 2025-10-01 06:13:05 +00:00: 6:13:05 AM [express] serving on port 3000

7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔍 Environment Variables Debug:
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_URL: [NOT SET]
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_HOST: [SET]
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_USER: [SET]
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_DATABASE: [SET]
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_PORT: 3306
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    MYSQL_PASSWORD: [NOT SET]
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔗 Using MySQL VPS configuration from environment variables
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔧 MySQL VPS: mysql://mapestate:***@72.60.134.44:3306/mapestate
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔗 Database configuration:
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    Host: 72.60.134.44:3306
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    User: mapestate
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    Database: mapestate
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔄 Connecting to MySQL VPS database...
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: ✅ MySQL VPS connection established successfully
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔍 Testing database connection...
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1548:25)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2472:17)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4960:35
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4990:3
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:345:25)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26) {
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:   errno: 1045,
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:   sql: undefined,
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:   sqlState: '28000',
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)"
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: }
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: ❌ Failed to connect to MySQL VPS database:
7|mapestate-api  | 2025-10-01 06:14:38 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: NO)
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: ⚠️ No database configured, using in-memory storage for development
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 💡 Set MYSQL_URL environment variable to use a database
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 🔧 Running startup fix for user language permissions...
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: Warning: connect.session() MemoryStore is not
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: designed for a production environment, as it will leak
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: memory, and will not scale past a single process.
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
7|mapestate-api  | 2025-10-01 06:14:38 +00:00: 6:14:38 AM [express] serving on port 3000
^C
root@srv1027249:~# ALTER USER 'mapestate'@'%' IDENTIFIED WITH mysql_native_password BY 'aB3!x8G#pQ2$mK9*';
FLUSH PRIVILEGES;
SELECT user, host, plugin FROM mysql.user WHERE user = 'mapestate';
ALTER: command not found
FLUSH: command not found
SELECT: command not found
root@srv1027249:~# cd /var/www/dailynewscrypto.net

# Create PM2 ecosystem config with environment variables
cat > ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: "mapestate-api",
    script: "./dist/index.js",
    env: {
      NODE_ENV: "production",
      MYSQL_HOST: "127.0.0.1",
      MYSQL_USER: "mapestate",
      MYSQL_PASSWORD: "aB3!x8G#pQ2$mK9*",
      MYSQL_DATABASE: "mapestate",
      MYSQL_PORT: "3306"
    }
  }]
};
EOF

# Restart with new config
pm2 delete mapestate-api
pm2 start ecosystem.config.js
pm2 logs mapestate-api --lines 20
[PM2] Applying action deleteProcessId on app [mapestate-api](ids: [ 7 ])
[PM2] [mapestate-api](7) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 24   │ online    │ 0%       │ 72.0mb   │
│ 2  │ dailynewscrypto    │ fork     │ 7    │ online    │ 0%       │ 71.6mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/dailynewscrypto.net/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/dailynewscrypto.net/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:458:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:435:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1537:24)
    at Module._compile (node:internal/modules/cjs/loader:1688:5)
    at Object..js (node:internal/modules/cjs/loader:1839:10)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
[TAILING] Tailing last 20 lines for [mapestate-api] process (change the value with --lines option)

^C
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 49
Server version: 8.0.43-0ubuntu0.24.04.2 (Ubuntu)

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> ALTER USER 'mapestate'@'%' IDENTIFIED WITH mysql_native_password BY 'aB3!x8G#pQ2$mK9*';
Query OK, 0 rows affected (0.01 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT user, host, plugin FROM mysql.user WHERE user = 'mapestate';
+-----------+------+-----------------------+
| user      | host | plugin                |
+-----------+------+-----------------------+
| mapestate | %    | mysql_native_password |
+-----------+------+-----------------------+
1 row in set (0.00 sec)

mysql> EXIT;
Bye
root@srv1027249:/var/www/dailynewscrypto.net# mysql -h 127.0.0.1 -u mapestate -p'aB3!x8G#pQ2$mK9*' mapestate -e "SELECT COUNT(*) FROM properties;"mysql: [Warning] Using a password on the command line interface can be insecure.
+----------+
| COUNT(*) |
+----------+
|        4 |
+----------+
root@srv1027249:/var/www/dailynewscrypto.net# cd /var/www/dailynewscrypto.net

# Create PM2 config with database credentials
cat > ecosystem.config.js << 'EOF'
module.exports = {
  apps: [{
    name: "mapestate-api",
    script: "./dist/index.js",
    env: {
      NODE_ENV: "production",
      MYSQL_HOST: "127.0.0.1",
      MYSQL_USER: "mapestate",
      MYSQL_PASSWORD: "aB3!x8G#pQ2$mK9*",
      MYSQL_DATABASE: "mapestate",
      MYSQL_PORT: "3306"
    }
  }]
};
EOF

# Restart PM2 with new configuration
pm2 delete mapestate-api
pm2 start ecosystem.config.js
pm2 logs mapestate-api --lines 30
[PM2][ERROR] Process or Namespace mapestate-api not found
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/dailynewscrypto.net/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/dailynewscrypto.net/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:458:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:435:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1537:24)
    at Module._compile (node:internal/modules/cjs/loader:1688:5)
    at Object..js (node:internal/modules/cjs/loader:1839:10)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
[TAILING] Tailing last 30 lines for [mapestate-api] process (change the value with --lines option)
ç√≈^X^C
root@srv1027249:/var/www/dailynewscrypto.net# curl http://localhost:PORT/api/properties
curl: (3) URL rejected: Port number was not a decimal number between 0 and 65535
root@srv1027249:/var/www/dailynewscrypto.net# # Check MySQL user authentication
mysql -u root -p -e "SELECT user, host, plugin FROM mysql.user WHERE user='mapestate';"

# Check database has data
mysql -u mapestate -p'aB3!x8G#pQ2$mK9*' mapestate -e "SELECT COUNT(*) FROM properties;"

# Check PM2 status
pm2 list
pm2 logs mapestate-api --lines 20
Enter password: 
+-----------+------+-----------------------+
| user      | host | plugin                |
+-----------+------+-----------------------+
| mapestate | %    | mysql_native_password |
+-----------+------+-----------------------+
mysql: [Warning] Using a password on the command line interface can be insecure.
+----------+
| COUNT(*) |
+----------+
|        4 |
+----------+
┌────┬────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name               │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ default     │ N/A     │ fork    │ 62772    │ 11h    │ 24   │ online    │ 0%       │ 72.0mb   │ root     │ disabled │
│ 2  │ dailynewscrypto    │ default     │ N/A     │ fork    │ 62784    │ 11h    │ 7    │ online    │ 0%       │ 71.6mb   │ root     │ disabled │
└────┴────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
[TAILING] Tailing last 20 lines for [mapestate-api] process (change the value with --lines option)
^C
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u root -p -e "ALTER USER 'mapestate'@'%' IDENTIFIED WITH mysql_native_password BY 'aB3!x8G#pQ2$mK9*'; FLUSH PRIVILEGES; SELECT user, host, plugin FROM mysql.user WHERE user='mapestate';"
-bash: !x8G#pQ2: event not found
root@srv1027249:/var/www/dailynewscrypto.net# # I'll run this for you
pm2 restart Start-application
Use --update-env to update environment variables
[PM2][ERROR] Process or Namespace Start-application not found
root@srv1027249:/var/www/dailynewscrypto.net# # I'll run this for you
pm2 restart Start-application
Use --update-env to update environment variables
[PM2][ERROR] Process or Namespace Start-application not found
root@srv1027249:/var/www/dailynewscrypto.net# # Test from VPS
mysql -h 72.60.134.44 -u mapestate -p'aB3!x8G#pQ2$mK9*' mapestate -e "SELECT COUNT(*) FROM properties;"
mysql: [Warning] Using a password on the command line interface can be insecure.
+----------+
| COUNT(*) |
+----------+
|        4 |
+----------+
root@srv1027249:/var/www/dailynewscrypto.net# 