Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-79-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Sep 30 18:24:26 UTC 2025

  System load:  0.05               Processes:             119
  Usage of /:   10.8% of 47.39GB   Users logged in:       0
  Memory usage: 38%                IPv4 address for eth0: 72.60.134.44
  Swap usage:   0%                 IPv6 address for eth0: 2a02:4780:41:695a::1


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


1 updates could not be installed automatically. For more details,
see /var/log/unattended-upgrades/unattended-upgrades.log

*** System restart required ***
Last login: Tue Sep 30 17:36:55 2025 from 169.254.0.1
root@srv1027249:~# cd /var/www/dailynewscrypto.net

# Check current storage type
pm2 logs mapestate --lines 20 | grep -E "DatabaseStorage|MemStorage"
6|mapestat | 🔗 Using MySQL DatabaseStorage

^X^Croot@srv1027249:/var/www/dailynewscrypto.net# 
root@srv1027249:/var/www/dailynewscrypto.net# 
root@srv1027249:/var/www/dailynewscrypto.net# 
root@srv1027249:/var/www/dailynewscrypto.net# pm2 logs mapestate --lines 100[TAILING] Tailing last 100 lines for [mapestate] process (change the value with --lines option)
/root/.pm2/logs/mapestate-error.log last 100 lines:
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.
6|mapestat | Warning: connect.session() MemoryStore is not
6|mapestat | designed for a production environment, as it will leak
6|mapestat | memory, and will not scale past a single process.

/root/.pm2/logs/mapestate-out.log last 100 lines:
6|mapestat |    Database: mapestate
6|mapestat | 🔄 Connecting to MySQL VPS database...
6|mapestat | ✅ MySQL VPS connection established successfully
6|mapestat | 🔍 Testing database connection...
6|mapestat | 💓 Database connection is healthy
6|mapestat | ✅ MySQL database initialized successfully
6|mapestat | 🔗 Using MySQL DatabaseStorage
6|mapestat | 🔧 Running startup fix for user language permissions...
6|mapestat | 🔧 Fixing existing users language permissions...
6|mapestat | Found 1 regular users to fix
6|mapestat | ✅ Finished fixing existing users language permissions
6|mapestat | 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
6|mapestat | 5:38:50 PM [express] serving on port 5000
6|mapestat | 
6|mapestat | > rest-express@1.0.0 start
6|mapestat | > node -r dotenv/config dist/index.js
6|mapestat | 
6|mapestat | 🔍 Environment Variables Debug:
6|mapestat |    MYSQL_URL: [NOT SET]
6|mapestat |    MYSQL_HOST: [SET]
6|mapestat |    MYSQL_USER: [SET]
6|mapestat |    MYSQL_DATABASE: [SET]
6|mapestat |    MYSQL_PORT: 3306
6|mapestat |    MYSQL_PASSWORD: [SET]
6|mapestat | 🔗 Using MySQL VPS configuration from environment variables
6|mapestat | 🔧 MySQL VPS: mysql://mapestate:***@localhost:3306/mapestate
6|mapestat | 🔗 Database configuration:
6|mapestat |    Host: localhost:3306
6|mapestat |    User: mapestate
6|mapestat |    Database: mapestate
6|mapestat | 🔄 Connecting to MySQL VPS database...
6|mapestat | ✅ MySQL VPS connection established successfully
6|mapestat | 🔍 Testing database connection...
6|mapestat | 💓 Database connection is healthy
6|mapestat | ✅ MySQL database initialized successfully
6|mapestat | 🔗 Using MySQL DatabaseStorage
6|mapestat | 🔧 Running startup fix for user language permissions...
6|mapestat | 🔧 Fixing existing users language permissions...
6|mapestat | Found 1 regular users to fix
6|mapestat | ✅ Finished fixing existing users language permissions
6|mapestat | 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
6|mapestat | 5:45:00 PM [express] serving on port 5000
6|mapestat | 
6|mapestat | > rest-express@1.0.0 start
6|mapestat | > node -r dotenv/config dist/index.js
6|mapestat | 
6|mapestat | 🔍 Environment Variables Debug:
6|mapestat |    MYSQL_URL: [NOT SET]
6|mapestat |    MYSQL_HOST: [SET]
6|mapestat |    MYSQL_USER: [SET]
6|mapestat |    MYSQL_DATABASE: [SET]
6|mapestat |    MYSQL_PORT: 3306
6|mapestat |    MYSQL_PASSWORD: [SET]
6|mapestat | 🔗 Using MySQL VPS configuration from environment variables
6|mapestat | 🔧 MySQL VPS: mysql://mapestate:***@localhost:3306/mapestate
6|mapestat | 🔗 Database configuration:
6|mapestat |    Host: localhost:3306
6|mapestat |    User: mapestate
6|mapestat |    Database: mapestate
6|mapestat | 🔄 Connecting to MySQL VPS database...
6|mapestat | ✅ MySQL VPS connection established successfully
6|mapestat | 🔍 Testing database connection...
6|mapestat | 💓 Database connection is healthy
6|mapestat | ✅ MySQL database initialized successfully
6|mapestat | 🔗 Using MySQL DatabaseStorage
6|mapestat | 🔧 Running startup fix for user language permissions...
6|mapestat | 🔧 Fixing existing users language permissions...
6|mapestat | Found 1 regular users to fix
6|mapestat | ✅ Finished fixing existing users language permissions
6|mapestat | 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
6|mapestat | 5:47:31 PM [express] serving on port 5000
6|mapestat | 
6|mapestat | > rest-express@1.0.0 start
6|mapestat | > node -r dotenv/config dist/index.js
6|mapestat | 
6|mapestat | 🔍 Environment Variables Debug:
6|mapestat |    MYSQL_URL: [NOT SET]
6|mapestat |    MYSQL_HOST: [SET]
6|mapestat |    MYSQL_USER: [SET]
6|mapestat |    MYSQL_DATABASE: [SET]
6|mapestat |    MYSQL_PORT: 3306
6|mapestat |    MYSQL_PASSWORD: [SET]
6|mapestat | 🔗 Using MySQL VPS configuration from environment variables
6|mapestat | 🔧 MySQL VPS: mysql://mapestate:***@localhost:3306/mapestate
6|mapestat | 🔗 Database configuration:
6|mapestat |    Host: localhost:3306
6|mapestat |    User: mapestate
6|mapestat |    Database: mapestate
6|mapestat | 🔄 Connecting to MySQL VPS database...
6|mapestat | ✅ MySQL VPS connection established successfully
6|mapestat | 🔍 Testing database connection...
6|mapestat | 💓 Database connection is healthy
6|mapestat | ✅ MySQL database initialized successfully
6|mapestat | 🔗 Using MySQL DatabaseStorage
6|mapestat | 🔧 Running startup fix for user language permissions...
6|mapestat | 🔧 Fixing existing users language permissions...
6|mapestat | Found 1 regular users to fix
6|mapestat | ✅ Finished fixing existing users language permissions
6|mapestat | 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
6|mapestat | 5:48:19 PM [express] serving on port 5000

^X^C
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u mapestate -p -h 72.60.134.44 -e "USE mapestate; SHOW TABLES;"
Enter password: 
ERROR 1045 (28000): Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u mapestate -p -h 72.60.134.44 -e "USE mapestate; SHOW TABLES;"
Enter password: 
+---------------------------+
| Tables_in_mapestate       |
+---------------------------+
| activity_metadata         |
| client_locations          |
| currency_rates            |
| customer_activity         |
| customer_points           |
| customer_wave_permissions |
| favorites                 |
| inquiries                 |
| properties                |
| property_amenities        |
| property_features         |
| property_images           |
| search_filters            |
| search_history            |
| user_languages            |
| users                     |
| waves                     |
+---------------------------+
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u mapestate -p -h 72.60.134.44 -e "USE mapestate; SHOW TABLES;"
Enter password: 
+---------------------------+
| Tables_in_mapestate       |
+---------------------------+
| activity_metadata         |
| client_locations          |
| currency_rates            |
| customer_activity         |
| customer_points           |
| customer_wave_permissions |
| favorites                 |
| inquiries                 |
| properties                |
| property_amenities        |
| property_features         |
| property_images           |
| search_filters            |
| search_history            |
| user_languages            |
| users                     |
| waves                     |
+---------------------------+
root@srv1027249:/var/www/dailynewscrypto.net# cd /var/www/dailynewscrypto.net
npm run db:push

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/dailynewscrypto.net/drizzle.config.ts'
DATABASE_URL, ensure the database is provisioned
root@srv1027249:/var/www/dailynewscrypto.net# mysql -u mapestate -p -h 72.60.134.44 -e "USE mapestate; SELECT COUNT(*) FROM properties;"
Enter password: 
+----------+
| COUNT(*) |
+----------+
|        4 |
+----------+
root@srv1027249:/var/www/dailynewscrypto.net# pm2 set mapestate MYSQL_HOST "72.60.134.44"
pm2 set mapestate MYSQL_USER "mapestate"
pm2 set mapestate MYSQL_PASSWORD "MapEstate2024!"
pm2 set mapestate MYSQL_DATABASE "mapestate"
pm2 restart mapestate
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [mapestate](ids: [ 6 ])
[PM2] [mapestate](6) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 19   │ online    │ 0%       │ 68.6mb   │
│ 2  │ dailynewscrypto    │ fork     │ 2    │ online    │ 0%       │ 67.8mb   │
│ 6  │ mapestate          │ fork     │ 1    │ online    │ 0%       │ 19.8mb   │
│ 0  │ mapestate-api      │ fork     │ 4    │ online    │ 0%       │ 118.3mb  │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:/var/www/dailynewscrypto.net# # Set the DATABASE_URL for your MySQL database
export DATABASE_URL="mysql://mapestate:MapEstate2024!@72.60.134.44:3306/mapestate"

# Now run the migrations
npm run db:push

# Restart your app with PM2
pm2 restart mapestate
-bash: !@72.60.134.44: event not found

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/dailynewscrypto.net/drizzle.config.ts'
DATABASE_URL, ensure the database is provisioned
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [mapestate](ids: [ 6 ])
[PM2] [mapestate](6) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 19   │ online    │ 0%       │ 68.6mb   │
│ 2  │ dailynewscrypto    │ fork     │ 2    │ online    │ 0%       │ 67.8mb   │
│ 6  │ mapestate          │ fork     │ 2    │ online    │ 0%       │ 19.8mb   │
│ 0  │ mapestate-api      │ fork     │ 4    │ online    │ 0%       │ 118.7mb  │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:/var/www/dailynewscrypto.net# # Set DATABASE_URL permanently in PM2
pm2 set mapestate DATABASE_URL "mysql://mapestate:MapEstate2024!@72.60.134.44:3306/mapestate"

# Restart
pm2 restart mapestate

# Now run migrations
npm run db:push
-bash: !@72.60.134.44: event not found
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [mapestate](ids: [ 6 ])
[PM2] [mapestate](6) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 1  │ dailynewscrypto    │ fork     │ 19   │ online    │ 0%       │ 68.2mb   │
│ 2  │ dailynewscrypto    │ fork     │ 2    │ online    │ 0%       │ 68.3mb   │
│ 6  │ mapestate          │ fork     │ 3    │ online    │ 0%       │ 15.4mb   │
│ 0  │ mapestate-api      │ fork     │ 4    │ online    │ 0%       │ 118.7mb  │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/dailynewscrypto.net/drizzle.config.ts'
DATABASE_URL, ensure the database is provisioned
root@srv1027249:/var/www/dailynewscrypto.net# 