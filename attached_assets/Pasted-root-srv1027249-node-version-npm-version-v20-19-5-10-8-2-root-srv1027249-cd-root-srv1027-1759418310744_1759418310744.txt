root@srv1027249:/# node --version
npm --version
v20.19.5
10.8.2
root@srv1027249:/# cd ~
root@srv1027249:~# /dailynewscrypto.net/
-bash: /dailynewscrypto.net/: No such file or directory
root@srv1027249:~# /dailynewscrypto.net
-bash: /dailynewscrypto.net: No such file or directory
root@srv1027249:~# cd dailynewscrypto.net
root@srv1027249:~/dailynewscrypto.net# ld
Command 'ld' not found, but can be installed with:
apt install binutils
root@srv1027249:~/dailynewscrypto.net# ls
attached_assets          drizzle.config.ts       package-lock.json  shared
client                   export-database.ts      package.json       tailwind.config.ts
components.json          mapestate-database.sql  postcss.config.js  tsconfig.json
create-vps-database.sql  netlify.toml            replit.md          vite.config.ts
dist                     node_modules            server             vps-setup-guide.txt
root@srv1027249:~/dailynewscrypto.net# npm install

up to date, audited 574 packages in 2s

83 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (1 low, 6 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@srv1027249:~/dailynewscrypto.net# npm start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js
🔍 Environment Variables Debug:
   MYSQL_URL: [NOT SET]
   MYSQL_HOST: [NOT SET]
   MYSQL_USER: [NOT SET]
   MYSQL_DATABASE: [NOT SET]
   MYSQL_PORT: [NOT SET]
   MYSQL_PASSWORD: [NOT SET]
📝 No MYSQL_URL found, using default configuration from environment variables
💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
🔗 Database configuration:
   Host: 72.60.134.44:3306
   User: mapestate
   Database: mapestate
🔄 Connecting to MySQL VPS database...
✅ MySQL VPS connection established successfully
🔍 Testing database connection...
⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
    at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
    at initializeDb (file:///root/dailynewscrypto.net/dist/index.js:1563:25)
    at StorageFactory.getStorage (file:///root/dailynewscrypto.net/dist/index.js:2499:17)
    at file:///root/dailynewscrypto.net/dist/index.js:5028:35
    at file:///root/dailynewscrypto.net/dist/index.js:5059:3
    at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
  code: 'ECONNREFUSED',
  errno: -111,
  sql: undefined,
  sqlState: undefined,
  sqlMessage: undefined
}
❌ Failed to connect to MySQL VPS database:
   Error: Error: connect ECONNREFUSED 72.60.134.44:3306
⚠️ No database configured, using in-memory storage for development
💡 Set MYSQL_URL environment variable to use a database
💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
🔧 Running startup fix for user language permissions...
Warning: connect.session() MemoryStore is not
designed for a production environment, as it will leak
memory, and will not scale past a single process.
📁 Serving uploads from: /root/dailynewscrypto.net/dist/uploads
3:17:32 PM [express] serving on port 5000
^C
root@srv1027249:~/dailynewscrypto.net# npm install -g pm2

added 133 packages in 7s

13 packages are looking for funding
  run `npm fund` for details
root@srv1027249:~/dailynewscrypto.net# pm2 start server/index.ts --interpreter npx --interpreter-args tsx --name "mapestate-app"

                        -------------

__/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
 _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
  _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
   _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
    _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
     _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
      _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
       _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
        _\///______________\///______________\///__\///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager for Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance 4 instances of api.js:
                $ pm2 start api.js -i 4

                Monitor in production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


                        -------------

[PM2] Spawning PM2 daemon with pm2_home=/root/.pm2
[PM2] PM2 Successfully daemonized
[PM2] Starting /root/dailynewscrypto.net/server/index.ts in fork_mode (1 instance)
[PM2] Done.
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate-app      │ fork     │ 0    │ online    │ 0%       │ 27.5mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:~/dailynewscrypto.net# pm2 startup
pm2 save
[PM2] Init System found: systemd
Platform systemd
Template
[Unit]
Description=PM2 process manager
Documentation=https://pm2.keymetrics.io/
After=network.target

[Service]
Type=forking
User=root
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
Environment=PM2_HOME=/root/.pm2
PIDFile=/root/.pm2/pm2.pid
Restart=on-failure

ExecStart=/usr/lib/node_modules/pm2/bin/pm2 resurrect
ExecReload=/usr/lib/node_modules/pm2/bin/pm2 reload all
ExecStop=/usr/lib/node_modules/pm2/bin/pm2 kill

[Install]
WantedBy=multi-user.target

Target path
/etc/systemd/system/pm2-root.service
Command list
[ 'systemctl enable pm2-root' ]
[PM2] Writing init configuration in /etc/systemd/system/pm2-root.service
[PM2] Making script booting at startup...
[PM2] [-] Executing: systemctl enable pm2-root...
Created symlink /etc/systemd/system/multi-user.target.wants/pm2-root.service → /etc/systemd/system/pm2-root.service.
[PM2] [v] Command successfully executed.
+---------------------------------------+
[PM2] Freeze a process list on reboot via:
$ pm2 save

[PM2] Remove init script via:
$ pm2 unstartup systemd
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@srv1027249:~/dailynewscrypto.net# # Check MySQL status
systemctl status mysql

# Start MySQL
systemctl start mysql

# Enable MySQL to start on boot
systemctl enable mysql
● mysql.service - MySQL Community Server
     Loaded: loaded (/usr/lib/systemd/system/mysql.service; enabled; preset: enabled)
     Active: active (running) since Thu 2025-10-02 14:59:01 UTC; 19min ago
   Main PID: 15399 (mysqld)
     Status: "Server is operational"
      Tasks: 38 (limit: 4654)
     Memory: 382.4M (peak: 383.7M)
        CPU: 4.742s
     CGroup: /system.slice/mysql.service
             └─15399 /usr/sbin/mysqld

Oct 02 14:59:00 srv1027249 systemd[1]: Starting mysql.service - MySQL Community Server...
Oct 02 14:59:01 srv1027249 systemd[1]: Started mysql.service - MySQL Community Server.
Synchronizing state of mysql.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable mysql
root@srv1027249:~/dailynewscrypto.net# 