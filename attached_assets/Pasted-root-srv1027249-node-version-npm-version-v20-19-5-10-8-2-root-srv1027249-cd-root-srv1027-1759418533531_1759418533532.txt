root@srv1027249:/# node --version
npm --version
v20.19.5
10.8.2
root@srv1027249:/# cd ~
root@srv1027249:~# /dailynewscrypto.net/
-bash: /dailynewscrypto.net/: No such file or directory
root@srv1027249:~# /dailynewscrypto.net
-bash: /dailynewscrypto.net: No such file or directory
root@srv1027249:~# cd dailynewscrypto.net
root@srv1027249:~/dailynewscrypto.net# ld
Command 'ld' not found, but can be installed with:
apt install binutils
root@srv1027249:~/dailynewscrypto.net# ls
attached_assets          drizzle.config.ts       package-lock.json  shared
client                   export-database.ts      package.json       tailwind.config.ts
components.json          mapestate-database.sql  postcss.config.js  tsconfig.json
create-vps-database.sql  netlify.toml            replit.md          vite.config.ts
dist                     node_modules            server             vps-setup-guide.txt
root@srv1027249:~/dailynewscrypto.net# npm install

up to date, audited 574 packages in 2s

83 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (1 low, 6 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@srv1027249:~/dailynewscrypto.net# npm start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js
🔍 Environment Variables Debug:
   MYSQL_URL: [NOT SET]
   MYSQL_HOST: [NOT SET]
   MYSQL_USER: [NOT SET]
   MYSQL_DATABASE: [NOT SET]
   MYSQL_PORT: [NOT SET]
   MYSQL_PASSWORD: [NOT SET]
📝 No MYSQL_URL found, using default configuration from environment variables
💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
🔗 Database configuration:
   Host: 72.60.134.44:3306
   User: mapestate
   Database: mapestate
🔄 Connecting to MySQL VPS database...
✅ MySQL VPS connection established successfully
🔍 Testing database connection...
⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
    at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
    at initializeDb (file:///root/dailynewscrypto.net/dist/index.js:1563:25)
    at StorageFactory.getStorage (file:///root/dailynewscrypto.net/dist/index.js:2499:17)
    at file:///root/dailynewscrypto.net/dist/index.js:5028:35
    at file:///root/dailynewscrypto.net/dist/index.js:5059:3
    at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
  code: 'ECONNREFUSED',
  errno: -111,
  sql: undefined,
  sqlState: undefined,
  sqlMessage: undefined
}
❌ Failed to connect to MySQL VPS database:
   Error: Error: connect ECONNREFUSED 72.60.134.44:3306
⚠️ No database configured, using in-memory storage for development
💡 Set MYSQL_URL environment variable to use a database
💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
🔧 Running startup fix for user language permissions...
Warning: connect.session() MemoryStore is not
designed for a production environment, as it will leak
memory, and will not scale past a single process.
📁 Serving uploads from: /root/dailynewscrypto.net/dist/uploads
3:17:32 PM [express] serving on port 5000
^C
root@srv1027249:~/dailynewscrypto.net# npm install -g pm2

added 133 packages in 7s

13 packages are looking for funding
  run `npm fund` for details
root@srv1027249:~/dailynewscrypto.net# pm2 start server/index.ts --interpreter npx --interpreter-args tsx --name "mapestate-app"

                        -------------

__/\\\\\\\\\\\\\____/\\\\____________/\\\\____/\\\\\\\\\_____
 _\/\\\/////////\\\_\/\\\\\\________/\\\\\\__/\\\///////\\\___
  _\/\\\_______\/\\\_\/\\\//\\\____/\\\//\\\_\///______\//\\\__
   _\/\\\\\\\\\\\\\/__\/\\\\///\\\/\\\/_\/\\\___________/\\\/___
    _\/\\\/////////____\/\\\__\///\\\/___\/\\\________/\\\//_____
     _\/\\\_____________\/\\\____\///_____\/\\\_____/\\\//________
      _\/\\\_____________\/\\\_____________\/\\\___/\\\/___________
       _\/\\\_____________\/\\\_____________\/\\\__/\\\\\\\\\\\\\\\_
        _\///______________\///______________\///__\///////////////__


                          Runtime Edition

        PM2 is a Production Process Manager for Node.js applications
                     with a built-in Load Balancer.

                Start and Daemonize any application:
                $ pm2 start app.js

                Load Balance 4 instances of api.js:
                $ pm2 start api.js -i 4

                Monitor in production:
                $ pm2 monitor

                Make pm2 auto-boot at server restart:
                $ pm2 startup

                To go further checkout:
                http://pm2.io/


                        -------------

[PM2] Spawning PM2 daemon with pm2_home=/root/.pm2
[PM2] PM2 Successfully daemonized
[PM2] Starting /root/dailynewscrypto.net/server/index.ts in fork_mode (1 instance)
[PM2] Done.
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate-app      │ fork     │ 0    │ online    │ 0%       │ 27.5mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:~/dailynewscrypto.net# pm2 startup
pm2 save
[PM2] Init System found: systemd
Platform systemd
Template
[Unit]
Description=PM2 process manager
Documentation=https://pm2.keymetrics.io/
After=network.target

[Service]
Type=forking
User=root
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
Environment=PM2_HOME=/root/.pm2
PIDFile=/root/.pm2/pm2.pid
Restart=on-failure

ExecStart=/usr/lib/node_modules/pm2/bin/pm2 resurrect
ExecReload=/usr/lib/node_modules/pm2/bin/pm2 reload all
ExecStop=/usr/lib/node_modules/pm2/bin/pm2 kill

[Install]
WantedBy=multi-user.target

Target path
/etc/systemd/system/pm2-root.service
Command list
[ 'systemctl enable pm2-root' ]
[PM2] Writing init configuration in /etc/systemd/system/pm2-root.service
[PM2] Making script booting at startup...
[PM2] [-] Executing: systemctl enable pm2-root...
Created symlink /etc/systemd/system/multi-user.target.wants/pm2-root.service → /etc/systemd/system/pm2-root.service.
[PM2] [v] Command successfully executed.
+---------------------------------------+
[PM2] Freeze a process list on reboot via:
$ pm2 save

[PM2] Remove init script via:
$ pm2 unstartup systemd
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@srv1027249:~/dailynewscrypto.net# # Check MySQL status
systemctl status mysql

# Start MySQL
systemctl start mysql

# Enable MySQL to start on boot
systemctl enable mysql
● mysql.service - MySQL Community Server
     Loaded: loaded (/usr/lib/systemd/system/mysql.service; enabled; preset: enabled)
     Active: active (running) since Thu 2025-10-02 14:59:01 UTC; 19min ago
   Main PID: 15399 (mysqld)
     Status: "Server is operational"
      Tasks: 38 (limit: 4654)
     Memory: 382.4M (peak: 383.7M)
        CPU: 4.742s
     CGroup: /system.slice/mysql.service
             └─15399 /usr/sbin/mysqld

Oct 02 14:59:00 srv1027249 systemd[1]: Starting mysql.service - MySQL Community Server...
Oct 02 14:59:01 srv1027249 systemd[1]: Started mysql.service - MySQL Community Server.
Synchronizing state of mysql.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable mysql
root@srv1027249:~/dailynewscrypto.net# cd ~/dailynewscrypto.net
cat > .env << 'EOF'
MYSQL_HOST=localhost
MYSQL_USER=mapestate
MYSQL_PASSWORD=Mapestate123!
MYSQL_DATABASE=mapestate
MYSQL_PORT=3306
NODE_ENV=production
EOF
root@srv1027249:~/dailynewscrypto.net# cd ~/dailynewscrypto.net
npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
✓ 2716 modules transformed.
../dist/public/index.html                                                   5.76 kB │ gzip:   1.89 kB
../dist/public/assets/logo_1757848527935-f97yEqP4.png                      34.60 kB
../dist/public/assets/UniQAIDAR_Asiacell 001_1758107005933-Cl-Cqdhv.ttf    57.23 kB
../dist/public/assets/UniQAIDAR_Asiacell 002_1758107005922-ClO-zV7t.ttf    57.24 kB
../dist/public/assets/US_flag_circular_design_55844ad0-B0cUOQ6G.png       506.88 kB
../dist/public/assets/Saudi_flag_circular_design_3c46c604-D1J1e9j5.png    518.22 kB
../dist/public/assets/Kurdish_flag_circular_design_55e28463-qI8fKU0i.png  529.54 kB
../dist/public/assets/index-DB3P6AH3.css                                  129.06 kB │ gzip:  20.43 kB
../dist/public/assets/filter-PZMHiNll.js                                    0.33 kB │ gzip:   0.26 kB
../dist/public/assets/arrow-left-CDErPK_U.js                                0.33 kB │ gzip:   0.27 kB
../dist/public/assets/search-B0__l0wf.js                                    0.34 kB │ gzip:   0.27 kB
../dist/public/assets/user-BRMPxHot.js                                      0.37 kB │ gzip:   0.28 kB
../dist/public/assets/dollar-sign-CzNd3XeV.js                               0.39 kB │ gzip:   0.30 kB
../dist/public/assets/heart-HZtzyPyg.js                                     0.41 kB │ gzip:   0.31 kB
../dist/public/assets/globe-BzEdP_o2.js                                     0.41 kB │ gzip:   0.29 kB
../dist/public/assets/circle-alert-Y0h3TZH0.js                              0.42 kB │ gzip:   0.29 kB
../dist/public/assets/map-pin-DTZuG_bG.js                                   0.42 kB │ gzip:   0.32 kB
../dist/public/assets/calendar-DyI40eqw.js                                  0.43 kB │ gzip:   0.30 kB
../dist/public/assets/chart-pie-C8NtOpSv.js                                 0.44 kB │ gzip:   0.32 kB
../dist/public/assets/shield-D7KSCCVT.js                                    0.44 kB │ gzip:   0.33 kB
../dist/public/assets/award-OrQydrf5.js                                     0.44 kB │ gzip:   0.33 kB
../dist/public/assets/lightbulb-CbE4beTf.js                                 0.46 kB │ gzip:   0.33 kB
../dist/public/assets/users-DRUZ7Zse.js                                     0.47 kB │ gzip:   0.32 kB
../dist/public/assets/phone-DIIjAq4T.js                                     0.56 kB │ gzip:   0.36 kB
../dist/public/assets/input-CEXP3Dsu.js                                     0.58 kB │ gzip:   0.35 kB
../dist/public/assets/eye-off-Cmb9t00B.js                                   0.60 kB │ gzip:   0.38 kB
../dist/public/assets/not-found-BCBho8H9.js                                 0.67 kB │ gzip:   0.38 kB
../dist/public/assets/separator-CMS0_aEz.js                                 0.67 kB │ gzip:   0.40 kB
../dist/public/assets/badge-ixHLGhen.js                                     0.71 kB │ gzip:   0.37 kB
../dist/public/assets/dashboard-redirect-BSdM-6F3.js                        0.74 kB │ gzip:   0.44 kB
../dist/public/assets/key-DSNGRiZU.js                                       0.84 kB │ gzip:   0.42 kB
../dist/public/assets/label-B69qZPXN.js                                     0.93 kB │ gzip:   0.60 kB
../dist/public/assets/bed-CweIxFYY.js                                       0.94 kB │ gzip:   0.44 kB
../dist/public/assets/card-BOi6fvo7.js                                      0.99 kB │ gzip:   0.36 kB
../dist/public/assets/use-local-favorites-tbfPXXzn.js                       1.36 kB │ gzip:   0.61 kB
../dist/public/assets/tag-BwWXodYX.js                                       1.41 kB │ gzip:   0.55 kB
../dist/public/assets/optimized-image-BjyTl3Eo.js                           2.21 kB │ gzip:   1.15 kB
../dist/public/assets/avatar-Dq2oKY0T.js                                    2.46 kB │ gzip:   1.18 kB
../dist/public/assets/use-properties-xhxCngDl.js                            2.67 kB │ gzip:   0.92 kB
../dist/public/assets/index-Bs6N3c5u.js                                     3.38 kB │ gzip:   1.54 kB
../dist/public/assets/favorites-Cw0gOZ76.js                                 3.51 kB │ gzip:   1.44 kB
../dist/public/assets/location-selection-map-B00Mwv-1.js                    3.76 kB │ gzip:   1.77 kB
../dist/public/assets/admin-login-CHZahOL9.js                               4.88 kB │ gzip:   1.83 kB
../dist/public/assets/usePropertyEvents-CeGEu9wF.js                         5.73 kB │ gzip:   1.83 kB
../dist/public/assets/property-card-CBH4Lkv5.js                             7.31 kB │ gzip:   2.76 kB
../dist/public/assets/about-IMa9Pctw.js                                     8.50 kB │ gzip:   2.01 kB
../dist/public/assets/dialog-CscdNu8G.js                                   11.29 kB │ gzip:   3.94 kB
../dist/public/assets/settings-C7iSxm9O.js                                 13.22 kB │ gzip:   3.71 kB
../dist/public/assets/meta-enhancement-C9nU5ZXP.js                         14.36 kB │ gzip:   5.74 kB
../dist/public/assets/typography-showcase-fIBIOtg_.js                      14.36 kB │ gzip:   2.85 kB
../dist/public/assets/properties-Cu1N1jFZ.js                               14.71 kB │ gzip:   4.01 kB
../dist/public/assets/Combination-Fordj0O9.js                              16.93 kB │ gzip:   6.47 kB
../dist/public/assets/SEOHead-Cw0REGzI.js                                  19.84 kB │ gzip:   7.20 kB
../dist/public/assets/home-D25_kKgL.js                                     20.01 kB │ gzip:   5.47 kB
../dist/public/assets/dropdown-menu-CBzHjo-W.js                            21.26 kB │ gzip:   6.27 kB
../dist/public/assets/select-CSPF9Ab-.js                                   21.80 kB │ gzip:   7.61 kB
../dist/public/assets/property-detail-sMUIReYz.js                          32.76 kB │ gzip:   9.62 kB
../dist/public/assets/property-map-Co_PSN4J.js                             47.15 kB │ gzip:  12.45 kB
../dist/public/assets/index-Cm4iEZ7Q.js                                    88.91 kB │ gzip:  24.81 kB
../dist/public/assets/admin-dashboard-BmgzwElm.js                          91.42 kB │ gzip:  20.37 kB
../dist/public/assets/customer-dashboard-DHzAzMxd.js                       97.55 kB │ gzip:  23.74 kB
../dist/public/assets/client-location-tracking-BXyNoO5u.js                195.56 kB │ gzip:  66.42 kB
../dist/public/assets/index-Dff1B840.js                                   317.74 kB │ gzip: 105.92 kB
../dist/public/assets/PieChart-BiU8YmNQ.js                                442.42 kB │ gzip: 119.36 kB
✓ built in 14.05s

  dist/index.js  200.4kb

⚡ Done in 27ms
root@srv1027249:~/dailynewscrypto.net# pm2 restart mapestate-app
pm2 logs mapestate-app
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [mapestate-app](ids: [ 0 ])
[PM2] [mapestate-app](0) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate-app      │ fork     │ 1    │ online    │ 0%       │ 19.6mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 15 lines for [mapestate-app] process (change the value with --lines option)
/root/.pm2/logs/mapestate-app-error.log last 15 lines:
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestat |   code: 'ECONNREFUSED',
0|mapestat |   errno: -111,
0|mapestat |   sql: undefined,
0|mapestat |   sqlState: undefined,
0|mapestat |   sqlMessage: undefined
0|mapestat | }
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-app-out.log last 15 lines:
0|mapestat | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestat | 🔗 Database configuration:
0|mapestat |    Host: 72.60.134.44:3306
0|mapestat |    User: mapestate
0|mapestat |    Database: mapestate
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/avatar
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/customer
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/properties
0|mapestat | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestat | 3:17:55 PM [express] serving on port 5000

0|mapestate-app  | 🔍 Environment Variables Debug:
0|mapestate-app  |    MYSQL_URL: [NOT SET]
0|mapestate-app  |    MYSQL_HOST: [NOT SET]
0|mapestate-app  |    MYSQL_USER: [NOT SET]
0|mapestate-app  |    MYSQL_DATABASE: [NOT SET]
0|mapestate-app  |    MYSQL_PORT: [NOT SET]
0|mapestate-app  |    MYSQL_PASSWORD: [NOT SET]
0|mapestate-app  | 📝 No MYSQL_URL found, using default configuration from environment variables
0|mapestate-app  | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestate-app  | 🔗 Database configuration:
0|mapestate-app  |    Host: 72.60.134.44:3306
0|mapestate-app  |    User: mapestate
0|mapestate-app  |    Database: mapestate
0|mapestate-app  | 🔄 Connecting to MySQL VPS database...
0|mapestate-app  | ✅ MySQL VPS connection established successfully
0|mapestate-app  | 🔍 Testing database connection...
0|mapestate-app  | ⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestate-app  |     at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
0|mapestate-app  |     at initializeDb (/root/dailynewscrypto.net/server/db.ts:36:25)
0|mapestate-app  |     at Function.getStorage (/root/dailynewscrypto.net/server/storageFactory.ts:19:13)
0|mapestate-app  |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestate-app  |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestate-app  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestate-app  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestate-app  |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestate-app  |   code: 'ECONNREFUSED',
0|mapestate-app  |   errno: -111,
0|mapestate-app  |   sql: undefined,
0|mapestate-app  |   sqlState: undefined,
0|mapestate-app  |   sqlMessage: undefined
0|mapestate-app  | }
0|mapestate-app  | ❌ Failed to connect to MySQL VPS database:
0|mapestate-app  |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestate-app  | ⚠️ No database configured, using in-memory storage for development
0|mapestate-app  | 💡 Set MYSQL_URL environment variable to use a database
0|mapestate-app  | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestate-app  | 🔧 Running startup fix for user language permissions...
0|mapestate-app  | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestate-app  | 3:20:13 PM [express] serving on port 5000
^C
root@srv1027249:~/dailynewscrypto.net# pm2 status
pm2 logs mapestate-app --lines 50
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate-app      │ fork     │ 1    │ online    │ 0%       │ 61.7mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 50 lines for [mapestate-app] process (change the value with --lines option)
/root/.pm2/logs/mapestate-app-error.log last 50 lines:
0|mapestat | ⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat |     at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
0|mapestat |     at initializeDb (/root/dailynewscrypto.net/server/db.ts:36:25)
0|mapestat |     at Function.getStorage (/root/dailynewscrypto.net/server/storageFactory.ts:19:13)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestat |   code: 'ECONNREFUSED',
0|mapestat |   errno: -111,
0|mapestat |   sql: undefined,
0|mapestat |   sqlState: undefined,
0|mapestat |   sqlMessage: undefined
0|mapestat | }
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database
0|mapestat | ⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat |     at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
0|mapestat |     at initializeDb (/root/dailynewscrypto.net/server/db.ts:36:25)
0|mapestat |     at Function.getStorage (/root/dailynewscrypto.net/server/storageFactory.ts:19:13)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestat |   code: 'ECONNREFUSED',
0|mapestat |   errno: -111,
0|mapestat |   sql: undefined,
0|mapestat |   sqlState: undefined,
0|mapestat |   sqlMessage: undefined
0|mapestat | }
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-app-out.log last 50 lines:
0|mapestat | 🔍 Environment Variables Debug:
0|mapestat |    MYSQL_URL: [NOT SET]
0|mapestat |    MYSQL_HOST: [NOT SET]
0|mapestat |    MYSQL_USER: [NOT SET]
0|mapestat |    MYSQL_DATABASE: [NOT SET]
0|mapestat |    MYSQL_PORT: [NOT SET]
0|mapestat |    MYSQL_PASSWORD: [NOT SET]
0|mapestat | 📝 No MYSQL_URL found, using default configuration from environment variables
0|mapestat | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestat | 🔗 Database configuration:
0|mapestat |    Host: 72.60.134.44:3306
0|mapestat |    User: mapestate
0|mapestat |    Database: mapestate
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/avatar
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/customer
0|mapestat | 📁 Created upload directory: /root/dailynewscrypto.net/server/uploads/properties
0|mapestat | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestat | 3:17:55 PM [express] serving on port 5000
0|mapestat | 🔍 Environment Variables Debug:
0|mapestat |    MYSQL_URL: [NOT SET]
0|mapestat |    MYSQL_HOST: [NOT SET]
0|mapestat |    MYSQL_USER: [NOT SET]
0|mapestat |    MYSQL_DATABASE: [NOT SET]
0|mapestat |    MYSQL_PORT: [NOT SET]
0|mapestat |    MYSQL_PASSWORD: [NOT SET]
0|mapestat | 📝 No MYSQL_URL found, using default configuration from environment variables
0|mapestat | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestat | 🔗 Database configuration:
0|mapestat |    Host: 72.60.134.44:3306
0|mapestat |    User: mapestate
0|mapestat |    Database: mapestate
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestat | 3:20:13 PM [express] serving on port 5000

^C
root@srv1027249:~/dailynewscrypto.net# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 14
Server version: 8.0.43-0ubuntu0.24.04.2 (Ubuntu)

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> CREATE DATABASE IF NOT EXISTS mapestate;
Query OK, 1 row affected, 1 warning (0.01 sec)

mysql> CREATE USER IF NOT EXISTS 'mapestate'@'localhost' IDENTIFIED BY 'Mapestate123!';
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> GRANT ALL PRIVILEGES ON mapestate.* TO 'mapestate'@'localhost';
Query OK, 0 rows affected (0.01 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> EXIT;
Bye
root@srv1027249:~/dailynewscrypto.net# npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
✓ 2716 modules transformed.
../dist/public/index.html                                                   5.76 kB │ gzip:   1.89 kB
../dist/public/assets/logo_1757848527935-f97yEqP4.png                      34.60 kB
../dist/public/assets/UniQAIDAR_Asiacell 001_1758107005933-Cl-Cqdhv.ttf    57.23 kB
../dist/public/assets/UniQAIDAR_Asiacell 002_1758107005922-ClO-zV7t.ttf    57.24 kB
../dist/public/assets/US_flag_circular_design_55844ad0-B0cUOQ6G.png       506.88 kB
../dist/public/assets/Saudi_flag_circular_design_3c46c604-D1J1e9j5.png    518.22 kB
../dist/public/assets/Kurdish_flag_circular_design_55e28463-qI8fKU0i.png  529.54 kB
../dist/public/assets/index-DB3P6AH3.css                                  129.06 kB │ gzip:  20.43 kB
../dist/public/assets/filter-PZMHiNll.js                                    0.33 kB │ gzip:   0.26 kB
../dist/public/assets/arrow-left-CDErPK_U.js                                0.33 kB │ gzip:   0.27 kB
../dist/public/assets/search-B0__l0wf.js                                    0.34 kB │ gzip:   0.27 kB
../dist/public/assets/user-BRMPxHot.js                                      0.37 kB │ gzip:   0.28 kB
../dist/public/assets/dollar-sign-CzNd3XeV.js                               0.39 kB │ gzip:   0.30 kB
../dist/public/assets/heart-HZtzyPyg.js                                     0.41 kB │ gzip:   0.31 kB
../dist/public/assets/globe-BzEdP_o2.js                                     0.41 kB │ gzip:   0.29 kB
../dist/public/assets/circle-alert-Y0h3TZH0.js                              0.42 kB │ gzip:   0.29 kB
../dist/public/assets/map-pin-DTZuG_bG.js                                   0.42 kB │ gzip:   0.32 kB
../dist/public/assets/calendar-DyI40eqw.js                                  0.43 kB │ gzip:   0.30 kB
../dist/public/assets/chart-pie-C8NtOpSv.js                                 0.44 kB │ gzip:   0.32 kB
../dist/public/assets/shield-D7KSCCVT.js                                    0.44 kB │ gzip:   0.33 kB
../dist/public/assets/award-OrQydrf5.js                                     0.44 kB │ gzip:   0.33 kB
../dist/public/assets/lightbulb-CbE4beTf.js                                 0.46 kB │ gzip:   0.33 kB
../dist/public/assets/users-DRUZ7Zse.js                                     0.47 kB │ gzip:   0.32 kB
../dist/public/assets/phone-DIIjAq4T.js                                     0.56 kB │ gzip:   0.36 kB
../dist/public/assets/input-CEXP3Dsu.js                                     0.58 kB │ gzip:   0.35 kB
../dist/public/assets/eye-off-Cmb9t00B.js                                   0.60 kB │ gzip:   0.38 kB
../dist/public/assets/not-found-BCBho8H9.js                                 0.67 kB │ gzip:   0.38 kB
../dist/public/assets/separator-CMS0_aEz.js                                 0.67 kB │ gzip:   0.40 kB
../dist/public/assets/badge-ixHLGhen.js                                     0.71 kB │ gzip:   0.37 kB
../dist/public/assets/dashboard-redirect-BSdM-6F3.js                        0.74 kB │ gzip:   0.44 kB
../dist/public/assets/key-DSNGRiZU.js                                       0.84 kB │ gzip:   0.42 kB
../dist/public/assets/label-B69qZPXN.js                                     0.93 kB │ gzip:   0.60 kB
../dist/public/assets/bed-CweIxFYY.js                                       0.94 kB │ gzip:   0.44 kB
../dist/public/assets/card-BOi6fvo7.js                                      0.99 kB │ gzip:   0.36 kB
../dist/public/assets/use-local-favorites-tbfPXXzn.js                       1.36 kB │ gzip:   0.61 kB
../dist/public/assets/tag-BwWXodYX.js                                       1.41 kB │ gzip:   0.55 kB
../dist/public/assets/optimized-image-BjyTl3Eo.js                           2.21 kB │ gzip:   1.15 kB
../dist/public/assets/avatar-Dq2oKY0T.js                                    2.46 kB │ gzip:   1.18 kB
../dist/public/assets/use-properties-xhxCngDl.js                            2.67 kB │ gzip:   0.92 kB
../dist/public/assets/index-Bs6N3c5u.js                                     3.38 kB │ gzip:   1.54 kB
../dist/public/assets/favorites-Cw0gOZ76.js                                 3.51 kB │ gzip:   1.44 kB
../dist/public/assets/location-selection-map-B00Mwv-1.js                    3.76 kB │ gzip:   1.77 kB
../dist/public/assets/admin-login-CHZahOL9.js                               4.88 kB │ gzip:   1.83 kB
../dist/public/assets/usePropertyEvents-CeGEu9wF.js                         5.73 kB │ gzip:   1.83 kB
../dist/public/assets/property-card-CBH4Lkv5.js                             7.31 kB │ gzip:   2.76 kB
../dist/public/assets/about-IMa9Pctw.js                                     8.50 kB │ gzip:   2.01 kB
../dist/public/assets/dialog-CscdNu8G.js                                   11.29 kB │ gzip:   3.94 kB
../dist/public/assets/settings-C7iSxm9O.js                                 13.22 kB │ gzip:   3.71 kB
../dist/public/assets/meta-enhancement-C9nU5ZXP.js                         14.36 kB │ gzip:   5.74 kB
../dist/public/assets/typography-showcase-fIBIOtg_.js                      14.36 kB │ gzip:   2.85 kB
../dist/public/assets/properties-Cu1N1jFZ.js                               14.71 kB │ gzip:   4.01 kB
../dist/public/assets/Combination-Fordj0O9.js                              16.93 kB │ gzip:   6.47 kB
../dist/public/assets/SEOHead-Cw0REGzI.js                                  19.84 kB │ gzip:   7.20 kB
../dist/public/assets/home-D25_kKgL.js                                     20.01 kB │ gzip:   5.47 kB
../dist/public/assets/dropdown-menu-CBzHjo-W.js                            21.26 kB │ gzip:   6.27 kB
../dist/public/assets/select-CSPF9Ab-.js                                   21.80 kB │ gzip:   7.61 kB
../dist/public/assets/property-detail-sMUIReYz.js                          32.76 kB │ gzip:   9.62 kB
../dist/public/assets/property-map-Co_PSN4J.js                             47.15 kB │ gzip:  12.45 kB
../dist/public/assets/index-Cm4iEZ7Q.js                                    88.91 kB │ gzip:  24.81 kB
../dist/public/assets/admin-dashboard-BmgzwElm.js                          91.42 kB │ gzip:  20.37 kB
../dist/public/assets/customer-dashboard-DHzAzMxd.js                       97.55 kB │ gzip:  23.74 kB
../dist/public/assets/client-location-tracking-BXyNoO5u.js                195.56 kB │ gzip:  66.42 kB
../dist/public/assets/index-Dff1B840.js                                   317.74 kB │ gzip: 105.92 kB
../dist/public/assets/PieChart-BiU8YmNQ.js                                442.42 kB │ gzip: 119.36 kB
✓ built in 13.65s

  dist/index.js  200.4kb

⚡ Done in 19ms
root@srv1027249:~/dailynewscrypto.net# pm2 restart mapestate-app --update-env
pm2 logs mapestate-app
[PM2] Applying action restartProcessId on app [mapestate-app](ids: [ 0 ])
[PM2] [mapestate-app](0) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate-app      │ fork     │ 2    │ online    │ 0%       │ 14.8mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 15 lines for [mapestate-app] process (change the value with --lines option)
/root/.pm2/logs/mapestate-app-error.log last 15 lines:
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestat |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestat |   code: 'ECONNREFUSED',
0|mapestat |   errno: -111,
0|mapestat |   sql: undefined,
0|mapestat |   sqlState: undefined,
0|mapestat |   sqlMessage: undefined
0|mapestat | }
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-app-out.log last 15 lines:
0|mapestat |    MYSQL_PORT: [NOT SET]
0|mapestat |    MYSQL_PASSWORD: [NOT SET]
0|mapestat | 📝 No MYSQL_URL found, using default configuration from environment variables
0|mapestat | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestat | 🔗 Database configuration:
0|mapestat |    Host: 72.60.134.44:3306
0|mapestat |    User: mapestate
0|mapestat |    Database: mapestate
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestat | 3:20:13 PM [express] serving on port 5000

0|mapestate-app  | 🔍 Environment Variables Debug:
0|mapestate-app  |    MYSQL_URL: [NOT SET]
0|mapestate-app  |    MYSQL_HOST: [NOT SET]
0|mapestate-app  |    MYSQL_USER: [NOT SET]
0|mapestate-app  |    MYSQL_DATABASE: [NOT SET]
0|mapestate-app  |    MYSQL_PORT: [NOT SET]
0|mapestate-app  |    MYSQL_PASSWORD: [NOT SET]
0|mapestate-app  | 📝 No MYSQL_URL found, using default configuration from environment variables
0|mapestate-app  | 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
0|mapestate-app  | 🔗 Database configuration:
0|mapestate-app  |    Host: 72.60.134.44:3306
0|mapestate-app  |    User: mapestate
0|mapestate-app  |    Database: mapestate
0|mapestate-app  | 🔄 Connecting to MySQL VPS database...
0|mapestate-app  | ✅ MySQL VPS connection established successfully
0|mapestate-app  | 🔍 Testing database connection...
0|mapestate-app  | ⚠️ Connection test failed: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestate-app  |     at PromisePool.query (/root/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
0|mapestate-app  |     at initializeDb (/root/dailynewscrypto.net/server/db.ts:36:25)
0|mapestate-app  |     at Function.getStorage (/root/dailynewscrypto.net/server/storageFactory.ts:19:13)
0|mapestate-app  |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:272:34)
0|mapestate-app  |     at <anonymous> (/root/dailynewscrypto.net/server/index.ts:322:1)
0|mapestate-app  |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestate-app  |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestate-app  |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
0|mapestate-app  |   code: 'ECONNREFUSED',
0|mapestate-app  |   errno: -111,
0|mapestate-app  |   sql: undefined,
0|mapestate-app  |   sqlState: undefined,
0|mapestate-app  |   sqlMessage: undefined
0|mapestate-app  | }
0|mapestate-app  | ❌ Failed to connect to MySQL VPS database:
0|mapestate-app  |    Error: Error: connect ECONNREFUSED 72.60.134.44:3306
0|mapestate-app  | ⚠️ No database configured, using in-memory storage for development
0|mapestate-app  | 💡 Set MYSQL_URL environment variable to use a database
0|mapestate-app  | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestate-app  | 🔧 Running startup fix for user language permissions...
0|mapestate-app  | 📁 Serving uploads from: /root/dailynewscrypto.net/server/uploads
0|mapestate-app  | 3:21:51 PM [express] serving on port 5000
