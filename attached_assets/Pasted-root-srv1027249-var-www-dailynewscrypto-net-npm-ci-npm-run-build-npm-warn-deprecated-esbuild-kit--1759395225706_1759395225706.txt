root@srv1027249:/var/www/dailynewscrypto.net# npm ci
npm run build
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead

added 573 packages, and audited 574 packages in 12s

83 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (1 low, 6 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
✓ 2716 modules transformed.
../dist/public/index.html                                                   5.74 kB │ gzip:   1.91 kB
../dist/public/assets/logo_1757848527935-f97yEqP4.png                      34.60 kB
../dist/public/assets/UniQAIDAR_Asiacell 001_1758107005933-Cl-Cqdhv.ttf    57.23 kB
../dist/public/assets/UniQAIDAR_Asiacell 002_1758107005922-ClO-zV7t.ttf    57.24 kB
../dist/public/assets/US_flag_circular_design_55844ad0-B0cUOQ6G.png       506.88 kB
../dist/public/assets/Saudi_flag_circular_design_3c46c604-D1J1e9j5.png    518.22 kB
../dist/public/assets/Kurdish_flag_circular_design_55e28463-qI8fKU0i.png  529.54 kB
../dist/public/assets/index-CauQUjjo.css                                  139.55 kB │ gzip:  21.99 kB
../dist/public/assets/filter-DbRFTFHs.js                                    0.33 kB │ gzip:   0.26 kB
../dist/public/assets/arrow-left-CoTiVq1x.js                                0.33 kB │ gzip:   0.27 kB
../dist/public/assets/search-DzY4OL2O.js                                    0.34 kB │ gzip:   0.27 kB
../dist/public/assets/user-pGVjVbIw.js                                      0.37 kB │ gzip:   0.29 kB
../dist/public/assets/dollar-sign-HAspwSH9.js                               0.39 kB │ gzip:   0.30 kB
../dist/public/assets/heart-QK6-XMjH.js                                     0.41 kB │ gzip:   0.31 kB
../dist/public/assets/globe-fmjVzH2r.js                                     0.41 kB │ gzip:   0.29 kB
../dist/public/assets/circle-alert-CLwmuRcz.js                              0.42 kB │ gzip:   0.29 kB
../dist/public/assets/map-pin-CqXPTmx6.js                                   0.42 kB │ gzip:   0.32 kB
../dist/public/assets/calendar-C67yHz66.js                                  0.43 kB │ gzip:   0.30 kB
../dist/public/assets/chart-pie-DaxpehoX.js                                 0.44 kB │ gzip:   0.32 kB
../dist/public/assets/shield-CH279z4C.js                                    0.44 kB │ gzip:   0.33 kB
../dist/public/assets/award-Bt2btIR_.js                                     0.44 kB │ gzip:   0.33 kB
../dist/public/assets/lightbulb-BkLTSZS0.js                                 0.46 kB │ gzip:   0.33 kB
../dist/public/assets/users-DlxAHseK.js                                     0.47 kB │ gzip:   0.33 kB
../dist/public/assets/phone-ics4Lnhl.js                                     0.56 kB │ gzip:   0.36 kB
../dist/public/assets/input-BZokg92K.js                                     0.58 kB │ gzip:   0.36 kB
../dist/public/assets/eye-off-D3FlHHyk.js                                   0.60 kB │ gzip:   0.38 kB
../dist/public/assets/not-found-BKG32huG.js                                 0.67 kB │ gzip:   0.38 kB
../dist/public/assets/separator-Dwjp0wzn.js                                 0.67 kB │ gzip:   0.40 kB
../dist/public/assets/badge-6QzZH1mM.js                                     0.71 kB │ gzip:   0.37 kB
../dist/public/assets/dashboard-redirect-Cpwz637t.js                        0.74 kB │ gzip:   0.44 kB
../dist/public/assets/key-CGks4V5m.js                                       0.84 kB │ gzip:   0.43 kB
../dist/public/assets/label-6j479GU0.js                                     0.93 kB │ gzip:   0.60 kB
../dist/public/assets/bed-5fkw13J4.js                                       0.94 kB │ gzip:   0.44 kB
../dist/public/assets/card-CcMIgv2q.js                                      0.99 kB │ gzip:   0.37 kB
../dist/public/assets/use-local-favorites-CDUJ9dGL.js                       1.36 kB │ gzip:   0.61 kB
../dist/public/assets/tag-BFzRAtZp.js                                       1.41 kB │ gzip:   0.56 kB
../dist/public/assets/optimized-image-DgXQVvVw.js                           2.21 kB │ gzip:   1.15 kB
../dist/public/assets/avatar-BaV2xsPN.js                                    2.46 kB │ gzip:   1.18 kB
../dist/public/assets/use-properties-DuslUHKn.js                            2.67 kB │ gzip:   0.92 kB
../dist/public/assets/index-B-wHRSx5.js                                     3.38 kB │ gzip:   1.54 kB
../dist/public/assets/favorites-UZJfqpN8.js                                 3.51 kB │ gzip:   1.44 kB
../dist/public/assets/location-selection-map-JQeU5IES.js                    3.76 kB │ gzip:   1.77 kB
../dist/public/assets/admin-login-Dc9iX92_.js                               4.88 kB │ gzip:   1.83 kB
../dist/public/assets/usePropertyEvents-CaupyYx9.js                         5.73 kB │ gzip:   1.83 kB
../dist/public/assets/property-card-BZT5BvmZ.js                             7.31 kB │ gzip:   2.77 kB
../dist/public/assets/about-r92dhYSh.js                                     8.50 kB │ gzip:   2.01 kB
../dist/public/assets/dialog-BOd_YWQy.js                                   11.29 kB │ gzip:   3.94 kB
../dist/public/assets/settings-BCMJd5bc.js                                 13.22 kB │ gzip:   3.71 kB
../dist/public/assets/meta-enhancement-VYOAXOTT.js                         14.36 kB │ gzip:   5.74 kB
../dist/public/assets/typography-showcase-CF29fvep.js                      14.36 kB │ gzip:   2.85 kB
../dist/public/assets/properties-CBXQ99cC.js                               14.71 kB │ gzip:   4.02 kB
../dist/public/assets/Combination-DAEIBIv2.js                              16.93 kB │ gzip:   6.47 kB
../dist/public/assets/SEOHead-l-80eDvk.js                                  19.84 kB │ gzip:   7.19 kB
../dist/public/assets/home-DX9i6SCV.js                                     20.01 kB │ gzip:   5.48 kB
../dist/public/assets/dropdown-menu-CN3cXxoV.js                            21.26 kB │ gzip:   6.27 kB
../dist/public/assets/select-DaVBQqQL.js                                   21.80 kB │ gzip:   7.61 kB
../dist/public/assets/property-detail-sHMUsgMe.js                          32.76 kB │ gzip:   9.61 kB
../dist/public/assets/property-map-tIb0104x.js                             47.15 kB │ gzip:  12.45 kB
../dist/public/assets/index-C1c2G9u0.js                                    88.91 kB │ gzip:  24.81 kB
../dist/public/assets/admin-dashboard-MyyJsF0n.js                          91.42 kB │ gzip:  20.37 kB
../dist/public/assets/customer-dashboard-DSOZNpY5.js                       97.55 kB │ gzip:  23.74 kB
../dist/public/assets/client-location-tracking-C8FA2sqs.js                195.56 kB │ gzip:  66.42 kB
../dist/public/assets/index-C4aCAYP0.js                                   317.71 kB │ gzip: 105.92 kB
../dist/public/assets/PieChart-BAbIRqf7.js                                442.42 kB │ gzip: 119.36 kB
✓ built in 13.12s

  dist/index.js  198.2kb

⚡ Done in 24ms
root@srv1027249:/var/www/dailynewscrypto.net# nano .env
root@srv1027249:/var/www/dailynewscrypto.net# npm run db:push --force
npm warn using --force Recommended protections disabled.

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/dailynewscrypto.net/drizzle.config.ts'
Using 'pg' driver for database querying
[⣷] Pulling schema from database...
error: received invalid response: 5b
    at /var/www/dailynewscrypto.net/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.query (/var/www/dailynewscrypto.net/node_modules/drizzle-kit/bin.cjs:66575:26)
    at async fromDatabase2 (/var/www/dailynewscrypto.net/node_modules/drizzle-kit/bin.cjs:18700:25) {
  length: 10
}
root@srv1027249:/var/www/dailynewscrypto.net# # Install PM2 if not already installed
npm install -g pm2

# Start the application
pm2 start ecosystem.config.js --env production

# Save PM2 configuration
pm2 save

# Enable PM2 to start on system reboot
pm2 startup

changed 133 packages in 6s

13 packages are looking for funding
  run `npm fund` for details
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/dailynewscrypto.net/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/dailynewscrypto.net/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:437:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:389:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1363:24)
    at Module._compile (node:internal/modules/cjs/loader:1503:5)
    at Module._extensions..js (node:internal/modules/cjs/loader:1623:10)
    at Module.load (node:internal/modules/cjs/loader:1266:32)
    at Module._load (node:internal/modules/cjs/loader:1091:12)
    at Module.require (node:internal/modules/cjs/loader:1289:19)
    at require (node:internal/modules/helpers:182:18)
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
[PM2] Init System found: systemd
Platform systemd
Template
[Unit]
Description=PM2 process manager
Documentation=https://pm2.keymetrics.io/
After=network.target

[Service]
Type=forking
User=root
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
Environment=PM2_HOME=/root/.pm2
PIDFile=/root/.pm2/pm2.pid
Restart=on-failure

ExecStart=/usr/lib/node_modules/pm2/bin/pm2 resurrect
ExecReload=/usr/lib/node_modules/pm2/bin/pm2 reload all
ExecStop=/usr/lib/node_modules/pm2/bin/pm2 kill

[Install]
WantedBy=multi-user.target

Target path
/etc/systemd/system/pm2-root.service
Command list
[ 'systemctl enable pm2-root' ]
[PM2] Writing init configuration in /etc/systemd/system/pm2-root.service
[PM2] Making script booting at startup...
[PM2] [-] Executing: systemctl enable pm2-root...
[PM2] [v] Command successfully executed.
+---------------------------------------+
[PM2] Freeze a process list on reboot via:
$ pm2 save

[PM2] Remove init script via:
$ pm2 unstartup systemd
root@srv1027249:/var/www/dailynewscrypto.net# # Copy nginx config
cp hostinger-nginx-http-only.conf /etc/nginx/sites-available/dailynewscrypto.net

# Update domain in config
sed -i 's/yourdomain.com/dailynewscrypto.net/g' /etc/nginx/sites-available/dailynewscrypto.net

# Enable site
ln -s /etc/nginx/sites-available/dailynewscrypto.net /etc/nginx/sites-enabled/

# Test and reload
nginx -t
systemctl reload nginx
ln: failed to create symbolic link '/etc/nginx/sites-enabled/dailynewscrypto.net': File exists
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
nginx.service is not active, cannot reload.
root@srv1027249:/var/www/dailynewscrypto.net# certbot --nginx -d dailynewscrypto.net -d www.dailynewscrypto.net
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Certificate not yet due for renewal

You have an existing certificate that has exactly the same domains or certificate name you requested and isn't close to expiry.
(ref: /etc/letsencrypt/renewal/dailynewscrypto.net.conf)

What would you like to do?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: Attempt to reinstall this existing certificate
2: Renew & replace the certificate (may be subject to CA rate limits)
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 1
Deploying certificate
Successfully deployed certificate for dailynewscrypto.net to /etc/nginx/sites-enabled/dailynewscrypto.net
Successfully deployed certificate for www.dailynewscrypto.net to /etc/nginx/sites-enabled/dailynewscrypto.net
Congratulations! You have successfully enabled HTTPS on https://dailynewscrypto.net and https://www.dailynewscrypto.net

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
root@srv1027249:/var/www/dailynewscrypto.net# sudo ./deploy.sh
sudo: ./deploy.sh: command not found
root@srv1027249:/var/www/dailynewscrypto.net# # Check PM2 status
pm2 status

# View application logs
pm2 logs mapestate-api

# Check if app is responding
curl http://localhost:3000/api/health
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 16   │ online    │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 15 lines for [mapestate-api] process (change the value with --lines option)
^C
curl: (7) Failed to connect to localhost port 3000 after 0 ms: Couldn't connect to server
root@srv1027249:/var/www/dailynewscrypto.net# curl http://localhost:3000/api/health
curl: (7) Failed to connect to localhost port 3000 after 0 ms: Couldn't connect to server
root@srv1027249:/var/www/dailynewscrypto.net# # Check PM2 process status
pm2 status

# If nothing is running, check the ecosystem config
cat ecosystem.config.js

# Check if the dist folder exists (the build output)
ls -la dist/

# Check if there's a built index.js
ls -la dist/index.js
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 16   │ online    │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
module.exports = {
  apps: [{
    name: 'mapestate-api',
    script: './dist/index.js',
    instances: 1,
    exec_mode: 'fork',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    // Logging
    log_file: './logs/combined.log',
    out_file: './logs/out.log',
    error_file: './logs/error.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    
    // Process management
    watch: false,
    ignore_watch: ['node_modules', 'logs', 'dist/public'],
    max_memory_restart: '1G',
    
    // Auto restart configuration
    restart_delay: 5000,
    max_restarts: 10,
    min_uptime: '10s',
    
    // Advanced features
    kill_timeout: 5000
  }]
};total 216
drwxr-xr-x 4 root root   4096 Oct  2 08:29 .
drwxr-xr-x 9 root root   4096 Oct  2 08:46 ..
-rw-r--r-- 1 root root 202915 Oct  2 08:45 index.js
drwxr-xr-x 3 root root   4096 Oct  2 08:45 public
drwxr-xr-x 5 root root   4096 Oct  2 08:29 uploads
-rw-r--r-- 1 root root 202915 Oct  2 08:45 dist/index.js
root@srv1027249:/var/www/dailynewscrypto.net# ^C
root@srv1027249:/var/www/dailynewscrypto.net# # Check if the app was built
npm run build

# After build, check if dist/index.js exists
ls -la dist/index.js

# Then start with PM2
pm2 start ecosystem.config.js --env production

# View logs to see any errors
pm2 logs

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.19 building for production...
✓ 2716 modules transformed.
../dist/public/index.html                                                   5.74 kB │ gzip:   1.91 kB
../dist/public/assets/logo_1757848527935-f97yEqP4.png                      34.60 kB
../dist/public/assets/UniQAIDAR_Asiacell 001_1758107005933-Cl-Cqdhv.ttf    57.23 kB
../dist/public/assets/UniQAIDAR_Asiacell 002_1758107005922-ClO-zV7t.ttf    57.24 kB
../dist/public/assets/US_flag_circular_design_55844ad0-B0cUOQ6G.png       506.88 kB
../dist/public/assets/Saudi_flag_circular_design_3c46c604-D1J1e9j5.png    518.22 kB
../dist/public/assets/Kurdish_flag_circular_design_55e28463-qI8fKU0i.png  529.54 kB
../dist/public/assets/index-CauQUjjo.css                                  139.55 kB │ gzip:  21.99 kB
../dist/public/assets/filter-DbRFTFHs.js                                    0.33 kB │ gzip:   0.26 kB
../dist/public/assets/arrow-left-CoTiVq1x.js                                0.33 kB │ gzip:   0.27 kB
../dist/public/assets/search-DzY4OL2O.js                                    0.34 kB │ gzip:   0.27 kB
../dist/public/assets/user-pGVjVbIw.js                                      0.37 kB │ gzip:   0.29 kB
../dist/public/assets/dollar-sign-HAspwSH9.js                               0.39 kB │ gzip:   0.30 kB
../dist/public/assets/heart-QK6-XMjH.js                                     0.41 kB │ gzip:   0.31 kB
../dist/public/assets/globe-fmjVzH2r.js                                     0.41 kB │ gzip:   0.29 kB
../dist/public/assets/circle-alert-CLwmuRcz.js                              0.42 kB │ gzip:   0.29 kB
../dist/public/assets/map-pin-CqXPTmx6.js                                   0.42 kB │ gzip:   0.32 kB
../dist/public/assets/calendar-C67yHz66.js                                  0.43 kB │ gzip:   0.30 kB
../dist/public/assets/chart-pie-DaxpehoX.js                                 0.44 kB │ gzip:   0.32 kB
../dist/public/assets/shield-CH279z4C.js                                    0.44 kB │ gzip:   0.33 kB
../dist/public/assets/award-Bt2btIR_.js                                     0.44 kB │ gzip:   0.33 kB
../dist/public/assets/lightbulb-BkLTSZS0.js                                 0.46 kB │ gzip:   0.33 kB
../dist/public/assets/users-DlxAHseK.js                                     0.47 kB │ gzip:   0.33 kB
../dist/public/assets/phone-ics4Lnhl.js                                     0.56 kB │ gzip:   0.36 kB
../dist/public/assets/input-BZokg92K.js                                     0.58 kB │ gzip:   0.36 kB
../dist/public/assets/eye-off-D3FlHHyk.js                                   0.60 kB │ gzip:   0.38 kB
../dist/public/assets/not-found-BKG32huG.js                                 0.67 kB │ gzip:   0.38 kB
../dist/public/assets/separator-Dwjp0wzn.js                                 0.67 kB │ gzip:   0.40 kB
../dist/public/assets/badge-6QzZH1mM.js                                     0.71 kB │ gzip:   0.37 kB
../dist/public/assets/dashboard-redirect-Cpwz637t.js                        0.74 kB │ gzip:   0.44 kB
../dist/public/assets/key-CGks4V5m.js                                       0.84 kB │ gzip:   0.43 kB
../dist/public/assets/label-6j479GU0.js                                     0.93 kB │ gzip:   0.60 kB
../dist/public/assets/bed-5fkw13J4.js                                       0.94 kB │ gzip:   0.44 kB
../dist/public/assets/card-CcMIgv2q.js                                      0.99 kB │ gzip:   0.37 kB
../dist/public/assets/use-local-favorites-CDUJ9dGL.js                       1.36 kB │ gzip:   0.61 kB
../dist/public/assets/tag-BFzRAtZp.js                                       1.41 kB │ gzip:   0.56 kB
../dist/public/assets/optimized-image-DgXQVvVw.js                           2.21 kB │ gzip:   1.15 kB
../dist/public/assets/avatar-BaV2xsPN.js                                    2.46 kB │ gzip:   1.18 kB
../dist/public/assets/use-properties-DuslUHKn.js                            2.67 kB │ gzip:   0.92 kB
../dist/public/assets/index-B-wHRSx5.js                                     3.38 kB │ gzip:   1.54 kB
../dist/public/assets/favorites-UZJfqpN8.js                                 3.51 kB │ gzip:   1.44 kB
../dist/public/assets/location-selection-map-JQeU5IES.js                    3.76 kB │ gzip:   1.77 kB
../dist/public/assets/admin-login-Dc9iX92_.js                               4.88 kB │ gzip:   1.83 kB
../dist/public/assets/usePropertyEvents-CaupyYx9.js                         5.73 kB │ gzip:   1.83 kB
../dist/public/assets/property-card-BZT5BvmZ.js                             7.31 kB │ gzip:   2.77 kB
../dist/public/assets/about-r92dhYSh.js                                     8.50 kB │ gzip:   2.01 kB
../dist/public/assets/dialog-BOd_YWQy.js                                   11.29 kB │ gzip:   3.94 kB
../dist/public/assets/settings-BCMJd5bc.js                                 13.22 kB │ gzip:   3.71 kB
../dist/public/assets/meta-enhancement-VYOAXOTT.js                         14.36 kB │ gzip:   5.74 kB
../dist/public/assets/typography-showcase-CF29fvep.js                      14.36 kB │ gzip:   2.85 kB
../dist/public/assets/properties-CBXQ99cC.js                               14.71 kB │ gzip:   4.02 kB
../dist/public/assets/Combination-DAEIBIv2.js                              16.93 kB │ gzip:   6.47 kB
../dist/public/assets/SEOHead-l-80eDvk.js                                  19.84 kB │ gzip:   7.19 kB
../dist/public/assets/home-DX9i6SCV.js                                     20.01 kB │ gzip:   5.48 kB
../dist/public/assets/dropdown-menu-CN3cXxoV.js                            21.26 kB │ gzip:   6.27 kB
../dist/public/assets/select-DaVBQqQL.js                                   21.80 kB │ gzip:   7.61 kB
../dist/public/assets/property-detail-sHMUsgMe.js                          32.76 kB │ gzip:   9.61 kB
../dist/public/assets/property-map-tIb0104x.js                             47.15 kB │ gzip:  12.45 kB
../dist/public/assets/index-C1c2G9u0.js                                    88.91 kB │ gzip:  24.81 kB
../dist/public/assets/admin-dashboard-MyyJsF0n.js                          91.42 kB │ gzip:  20.37 kB
../dist/public/assets/customer-dashboard-DSOZNpY5.js                       97.55 kB │ gzip:  23.74 kB
../dist/public/assets/client-location-tracking-C8FA2sqs.js                195.56 kB │ gzip:  66.42 kB
../dist/public/assets/index-C4aCAYP0.js                                   317.71 kB │ gzip: 105.92 kB
../dist/public/assets/PieChart-BAbIRqf7.js                                442.42 kB │ gzip: 119.36 kB
✓ built in 13.98s

  dist/index.js  198.2kb

⚡ Done in 23ms
-rw-r--r-- 1 root root 202915 Oct  2 08:48 dist/index.js
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/dailynewscrypto.net/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/dailynewscrypto.net/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:437:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:389:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1363:24)
    at Module._compile (node:internal/modules/cjs/loader:1503:5)
    at Module._extensions..js (node:internal/modules/cjs/loader:1623:10)
    at Module.load (node:internal/modules/cjs/loader:1266:32)
    at Module._load (node:internal/modules/cjs/loader:1091:12)
    at Module.require (node:internal/modules/cjs/loader:1289:19)
    at require (node:internal/modules/helpers:182:18)
[TAILING] Tailing last 15 lines for [all] processes (change the value with --lines option)
/root/.pm2/pm2.log last 15 lines:
PM2        | 2025-10-02T08:47:19: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:47:19: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:47:19: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:47:42: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:47:42: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:48:12: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:48:12: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:48:12: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:48:12: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:48:12: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:48:12: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:48:42: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:48:42: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:48:45: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:48:45: PM2 error: TypeError: One of the pids provided is invalid

/root/.pm2/logs/mapestate-out.log last 15 lines:
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 

/root/.pm2/logs/mapestate-error.log last 15 lines:
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
0|mapestat | 
0|mapestat | Node.js v20.19.5
0|mapestat | file:///root/dailynewscrypto.net/dist/index.js:4660
0|mapestat | var vite_config_default = (void 0)({
0|mapestat |                                   ^
0|mapestat | 
0|mapestat | TypeError: (void 0) is not a function
0|mapestat |     at file:///root/dailynewscrypto.net/dist/index.js:4660:35
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
0|mapestat | 
0|mapestat | Node.js v20.19.5

^C
root@srv1027249:/var/www/dailynewscrypto.net# pm2 status
ls -la dist/
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 16   │ online    │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
total 216
drwxr-xr-x 4 root root   4096 Oct  2 08:29 .
drwxr-xr-x 9 root root   4096 Oct  2 08:48 ..
-rw-r--r-- 1 root root 202915 Oct  2 08:48 index.js
drwxr-xr-x 3 root root   4096 Oct  2 08:48 public
drwxr-xr-x 5 root root   4096 Oct  2 08:29 uploads
root@srv1027249:/var/www/dailynewscrypto.net# 
root@srv1027249:/var/www/dailynewscrypto.net# cd /var/www/dailynewscrypto.net
mv ecosystem.config.js ecosystem.config.cjs
root@srv1027249:/var/www/dailynewscrypto.net# nano .env
root@srv1027249:/var/www/dailynewscrypto.net# nano .env
root@srv1027249:/var/www/dailynewscrypto.net# systemctl start nginx
systemctl enable nginx
systemctl status nginx
Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable nginx
× nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled)
     Active: failed (Result: exit-code) since Thu 2025-10-02 08:52:46 UTC; 869ms ago
   Duration: 31min 24.905s
       Docs: man:nginx(8)
        CPU: 17ms

Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to 0.0.0.0:443 failed >
Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to 0.0.0.0:80 failed (>
Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to [::]:80 failed (98:>
Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to 0.0.0.0:443 failed >
Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to 0.0.0.0:80 failed (>
Oct 02 08:52:45 srv1027249 nginx[38456]: nginx: [emerg] bind() to [::]:80 failed (98:>
Oct 02 08:52:46 srv1027249 nginx[38456]: nginx: [emerg] still could not bind()
Oct 02 08:52:46 srv1027249 systemd[1]: nginx.service: Control process exited, code=ex>
Oct 02 08:52:46 srv1027249 systemd[1]: nginx.service: Failed with result 'exit-code'.
Oct 02 08:52:46 srv1027249 systemd[1]: Failed to start nginx.service - A high perform>

root@srv1027249:/var/www/dailynewscrypto.net# cd /var/www/dailynewscrypto.net

# Start with the renamed .cjs file
pm2 start ecosystem.config.cjs --env production

# Check status
pm2 status

# View logs
pm2 logs

# Save configuration
pm2 save
[PM2][WARN] Applications mapestate-api not running, starting...
[PM2][WARN] Folder does not exist: /var/www/dailynewscrypto.net/logs
[PM2] Creating folder: /var/www/dailynewscrypto.net/logs
[PM2] App [mapestate-api] launched (1 instances)
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 16   │ online    │ 0%       │ 0b       │
│ 1  │ mapestate-api      │ fork     │ 0    │ online    │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 16   │ online    │ 0%       │ 0b       │
│ 1  │ mapestate-api      │ fork     │ 0    │ online    │ 0%       │ 0b       │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 15 lines for [all] processes (change the value with --lines option)
/root/.pm2/pm2.log last 15 lines:
PM2        | 2025-10-02T08:52:12: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:42: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:42: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:55: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:55: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:55: PM2 log: App [mapestate-api:1] starting in -fork mode-
PM2        | 2025-10-02T08:52:55: PM2 log: App [mapestate-api:1] online
PM2        | 2025-10-02T08:52:55: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:55: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:56: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:56: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:56: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:56: PM2 error: TypeError: One of the pids provided is invalid
PM2        | 2025-10-02T08:52:56: PM2 error: Error caught while calling pidusage
PM2        | 2025-10-02T08:52:56: PM2 error: TypeError: One of the pids provided is invalid

/root/.pm2/logs/mapestate-out.log last 15 lines:
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 
0|mapestat | 
0|mapestat | > rest-express@1.0.0 start
0|mapestat | > NODE_ENV=production node dist/index.js
0|mapestat | 

/root/.pm2/logs/mapestate-error.log last 15 lines:
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
0|mapestat | 
0|mapestat | Node.js v20.19.5
0|mapestat | file:///root/dailynewscrypto.net/dist/index.js:4660
0|mapestat | var vite_config_default = (void 0)({
0|mapestat |                                   ^
0|mapestat | 
0|mapestat | TypeError: (void 0) is not a function
0|mapestat |     at file:///root/dailynewscrypto.net/dist/index.js:4660:35
0|mapestat |     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
0|mapestat |     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
0|mapestat |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
0|mapestat | 
0|mapestat | Node.js v20.19.5

/var/www/dailynewscrypto.net/logs/out-1.log last 15 lines:
/var/www/dailynewscrypto.net/logs/error-1.log last 15 lines:
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 🔍 Environment Variables Debug:
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_URL: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_HOST: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_USER: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_DATABASE: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_PORT: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    MYSQL_PASSWORD: [NOT SET]
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 📝 No MYSQL_URL found, using default configuration from environment variables
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 🔗 Database configuration:
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    Host: 72.60.134.44:3306
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    User: mapestate
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    Database: mapestate
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 🔄 Connecting to MySQL VPS database...
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: ✅ MySQL VPS connection established successfully
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 🔍 Testing database connection...
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1550:25)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2474:17)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4962:35
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4993:3
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24) {
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:   errno: 1045,
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:   sql: undefined,
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:   sqlState: '28000',
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)"
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: }
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: ❌ Failed to connect to MySQL VPS database:
1|mapestate-api  | 2025-10-02 08:52:56 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: ⚠️ No database configured, using in-memory storage for development
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 💡 Set MYSQL_URL environment variable to use a database
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 🔧 Running startup fix for user language permissions...
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: Warning: connect.session() MemoryStore is not
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: designed for a production environment, as it will leak
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: memory, and will not scale past a single process.
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
1|mapestate-api  | 2025-10-02 08:52:56 +00:00: 8:52:56 AM [express] serving on port 3000
# Test if app is running
curl http://localhost:3000/api/health

# Or check any API endpoint
curl http://localhost:3000/api/properties
^C
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@srv1027249:/var/www/dailynewscrypto.net# # Test if app is running
curl http://localhost:3000/api/health

# Or check any API endpoint
curl http://localhost:3000/api/properties
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Charset must be first -->
    <meta charset="UTF-8" />
    
    <!-- Viewport without maximum-scale for accessibility -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    
    <!-- Performance optimizations - preconnect before other resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    
    <!-- Primary Meta Tags -->
    <title>MapEstate - AI-Powered Real Estate Finder | Properties in Kurdistan, Iraq</title>
    <meta name="title" content="MapEstate - AI-Powered Real Estate Finder | Properties in Kurdistan, Iraq" />
    <meta name="description" content="Find your perfect home with AI-powered recommendations. Discover properties for rent and sale in Kurdistan, Iraq with intelligent search, detailed maps, and expert agents. Search apartments, houses, villas, and land with advanced filters." />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="author" content="MapEstate" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://dailynewscrypto.net/" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dailynewscrypto.net/" />
    <meta property="og:title" content="MapEstate - AI-Powered Real Estate Finder | Properties in Kurdistan, Iraq" />
    <meta property="og:description" content="Find your perfect home with AI-powered recommendations. Discover properties for rent and sale in Kurdistan, Iraq with intelligent search and expert agents." />
    <meta property="og:image" content="https://dailynewscrypto.net/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="MapEstate" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://dailynewscrypto.net/" />
    <meta property="twitter:title" content="MapEstate - AI-Powered Real Estate Finder | Properties in Kurdistan, Iraq" />
    <meta property="twitter:description" content="Find your perfect home with AI-powered recommendations. Discover properties for rent and sale in Kurdistan, Iraq." />
    <meta property="twitter:image" content="https://dailynewscrypto.net/og-image.jpg" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MapEstate",
      "url": "https://dailynewscrypto.net",
      "description": "AI-powered real estate platform for finding properties in Kurdistan, Iraq",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://dailynewscrypto.net/properties?search={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "publisher": {
        "@type": "Organization",
        "name": "MapEstate",
        "logo": {
          "@type": "ImageObject",
          "url": "https://dailynewscrypto.net/logo_1757848527935.png"
        }
      }
    }
    </script>
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Mobile Web App (modern replacement for deprecated apple-mobile-web-app-capable) -->
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Consolidated Google Fonts - Single request for all fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Tajawal:wght@300;400;500;600;700&family=Cairo:wght@300;400;500;600;700&family=Noto+Sans+Kurdish:wght@300;400;500;600;700&family=Noto+Naskh+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Font Awesome for icons with integrity check -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="module" crossorigin src="/assets/index-C4aCAYP0.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-CauQUjjo.css">
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Global function for map popup navigation -->
    <script>
      window.viewPropertyFromMap = function(propertyId) {
        // Navigate to property detail page
        window.location.href = '/property/' + propertyId;
      };
    </script>
    
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
[]root@srv1027249:/var/www/dailynewscrypto.net# pm2 logs mapestate-api --lines 50
[TAILING] Tailing last 50 lines for [mapestate-api] process (change the value with --lines option)
/var/www/dailynewscrypto.net/logs/error-1.log last 50 lines:
1|mapestat | 2025-10-02 08:52:56 +00:00: ⚠️ Connection test failed: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)
1|mapestat | 2025-10-02 08:52:56 +00:00:     at PromisePool.query (/var/www/dailynewscrypto.net/node_modules/mysql2/lib/promise/pool.js:36:22)
1|mapestat | 2025-10-02 08:52:56 +00:00:     at initializeDb (file:///var/www/dailynewscrypto.net/dist/index.js:1550:25)
1|mapestat | 2025-10-02 08:52:56 +00:00:     at StorageFactory.getStorage (file:///var/www/dailynewscrypto.net/dist/index.js:2474:17)
1|mapestat | 2025-10-02 08:52:56 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4962:35
1|mapestat | 2025-10-02 08:52:56 +00:00:     at file:///var/www/dailynewscrypto.net/dist/index.js:4993:3
1|mapestat | 2025-10-02 08:52:56 +00:00:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
1|mapestat | 2025-10-02 08:52:56 +00:00:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24) {
1|mapestat | 2025-10-02 08:52:56 +00:00:   code: 'ER_ACCESS_DENIED_ERROR',
1|mapestat | 2025-10-02 08:52:56 +00:00:   errno: 1045,
1|mapestat | 2025-10-02 08:52:56 +00:00:   sql: undefined,
1|mapestat | 2025-10-02 08:52:56 +00:00:   sqlState: '28000',
1|mapestat | 2025-10-02 08:52:56 +00:00:   sqlMessage: "Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)"
1|mapestat | 2025-10-02 08:52:56 +00:00: }
1|mapestat | 2025-10-02 08:52:56 +00:00: ❌ Failed to connect to MySQL VPS database:
1|mapestat | 2025-10-02 08:52:56 +00:00:    Error: Error: Access denied for user 'mapestate'@'72.60.134.44' (using password: YES)
1|mapestat | 2025-10-02 08:52:56 +00:00: ⚠️ No database configured, using in-memory storage for development
1|mapestat | 2025-10-02 08:52:56 +00:00: 💡 Set MYSQL_URL environment variable to use a database
1|mapestat | 2025-10-02 08:52:56 +00:00: Warning: connect.session() MemoryStore is not
1|mapestat | 2025-10-02 08:52:56 +00:00: designed for a production environment, as it will leak
1|mapestat | 2025-10-02 08:52:56 +00:00: memory, and will not scale past a single process.

/var/www/dailynewscrypto.net/logs/out-1.log last 50 lines:
1|mapestat | 2025-10-02 08:52:56 +00:00: 🔍 Environment Variables Debug:
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_URL: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_HOST: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_USER: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_DATABASE: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_PORT: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00:    MYSQL_PASSWORD: [NOT SET]
1|mapestat | 2025-10-02 08:52:56 +00:00: 📝 No MYSQL_URL found, using default configuration from environment variables
1|mapestat | 2025-10-02 08:52:56 +00:00: 💡 Tip: Set environment variables MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE
1|mapestat | 2025-10-02 08:52:56 +00:00: 🔗 Database configuration:
1|mapestat | 2025-10-02 08:52:56 +00:00:    Host: 72.60.134.44:3306
1|mapestat | 2025-10-02 08:52:56 +00:00:    User: mapestate
1|mapestat | 2025-10-02 08:52:56 +00:00:    Database: mapestate
1|mapestat | 2025-10-02 08:52:56 +00:00: 🔄 Connecting to MySQL VPS database...
1|mapestat | 2025-10-02 08:52:56 +00:00: ✅ MySQL VPS connection established successfully
1|mapestat | 2025-10-02 08:52:56 +00:00: 🔍 Testing database connection...
1|mapestat | 2025-10-02 08:52:56 +00:00: 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
1|mapestat | 2025-10-02 08:52:56 +00:00: 🔧 Running startup fix for user language permissions...
1|mapestat | 2025-10-02 08:52:56 +00:00: 📁 Serving uploads from: /var/www/dailynewscrypto.net/dist/uploads
1|mapestat | 2025-10-02 08:52:56 +00:00: 8:52:56 AM [express] serving on port 3000
1|mapestat | 2025-10-02 08:53:10 +00:00: GET /api/health 200 in 9ms
1|mapestat | 2025-10-02 08:53:10 +00:00: GET /api/properties 200 in 4ms : []

1|mapestate-api  | 2025-10-02 08:53:28 +00:00: GET /api/properties 200 in 1ms : []
1|mapestate-api  | 2025-10-02 08:53:31 +00:00: GET /api/auth/me 401 in 2ms : {"message":"Unauthorized"}
1|mapestate-api  | 2025-10-02 08:53:31 +00:00: GET /api/properties/featured 200 in 1ms : []
1|mapestate-api  | 2025-10-02 08:53:31 +00:00: GET /api/properties 304 in 1ms : []
1|mapestate-api  | 2025-10-02 08:53:32 +00:00: 🔌 New SSE connection established
1|mapestate-api  | 2025-10-02 08:53:32 +00:00: 📡 SSE padding sent, forcing stream start
1|mapestate-api  | 2025-10-02 08:53:32 +00:00: 📡 SSE initial connection message sent and flushed
1|mapestate-api  | 2025-10-02 08:53:32 +00:00: 📊 SSE clients connected: 1
