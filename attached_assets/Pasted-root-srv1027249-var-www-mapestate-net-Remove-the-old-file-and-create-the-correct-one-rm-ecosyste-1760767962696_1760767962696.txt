root@srv1027249:/var/www/mapestate.net# # Remove the old file and create the correct one
rm ecosystem.config.js

cat > ecosystem.config.cjs << 'EOF'
module.exports = {
  apps: [{
    name: 'mapestate',
    script: 'npm',
    args: 'run dev',
    env: {
      NODE_ENV: 'production',
      MYSQL_HOST: '72.60.134.44',
      MYSQL_USER: 'mapestate',
      MYSQL_PASSWORD: 'Mapestate123!',
      MYSQL_DATABASE: 'mapestate',
      MYSQL_PORT: '3306'
    }
  }]
}
EOF

# Now start PM2 with the correct file
pm2 start ecosystem.config.cjs
pm2 save
pm2 status
pm2 logs mapestate --lines 30
[PM2][WARN] Applications mapestate not running, starting...
[PM2] App [mapestate] launched (1 instances)
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ mapestate          â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 14.8mb   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ mapestate          â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 59.8mb   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[TAILING] Tailing last 30 lines for [mapestate] process (change the value with --lines option)
/root/.pm2/logs/mapestate-error.log last 30 lines:
0|mapestat | âŒ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | âš ï¸ No database configured, using in-memory storage for development
0|mapestat | ğŸ’¡ Set MYSQL_URL environment variable to use a database
0|mapestat | âŒ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | âš ï¸ No database configured, using in-memory storage for development
0|mapestat | ğŸ’¡ Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-out.log last 30 lines:
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 
0|mapestat | ğŸ’¾ Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | ğŸ”§ Running startup fix for user language permissions...
0|mapestat | ğŸ“ Created upload directory: /var/www/mapestate.net/server/uploads/customer
0|mapestat | ğŸ“ Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:09:29 AM [express] serving on port 5000
0|mapestat | âœ… Default users initialized in MemStorage (development mode)
0|mapestat | ğŸ”‘ Use 'admin' and 'john_agent' usernames to login
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts .env
0|mapestat | 
0|mapestat | ğŸ’¾ Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | ğŸ”§ Running startup fix for user language permissions...
0|mapestat | ğŸ“ Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:11:05 AM [express] serving on port 5000
0|mapestat | âœ… Default users initialized in MemStorage (development mode)
0|mapestat | ğŸ”‘ Use 'admin' and 'john_agent' usernames to login
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 

0|mapestate  | ğŸ”„ Connecting to MySQL VPS database...
0|mapestate  | âœ… MySQL VPS connection established successfully
0|mapestate  | ğŸ” Testing database connection...
0|mapestate  | ğŸ’“ Database connection is healthy
0|mapestate  | âœ… MySQL database initialized successfully
0|mapestate  | ğŸ”— Using MySQL DatabaseStorage
0|mapestate  | â„¹ï¸ Default users already exist in database
0|mapestate  | ğŸ”§ Running startup fix for user language permissions...
0|mapestate  | ğŸ”§ Fixing existing users language permissions...
0|mapestate  | Found 1 regular users to fix
0|mapestate  | âœ… Finished fixing existing users language permissions
0|mapestate  | ğŸ“ Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestate  | 6:12:20 AM [express] serving on port 5000
^X^C
root@srv1027249:/var/www/mapestate.net# 