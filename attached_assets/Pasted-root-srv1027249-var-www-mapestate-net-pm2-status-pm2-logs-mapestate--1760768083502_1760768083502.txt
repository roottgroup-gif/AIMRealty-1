root@srv1027249:/var/www/mapestate.net# pm2 status
pm2 logs mapestate
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 0    │ online    │ 0%       │ 55.8mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
[TAILING] Tailing last 15 lines for [mapestate] process (change the value with --lines option)
/root/.pm2/logs/mapestate-error.log last 15 lines:
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-out.log last 15 lines:
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💓 Database connection is healthy
0|mapestat | ✅ MySQL database initialized successfully
0|mapestat | 🔗 Using MySQL DatabaseStorage
0|mapestat | ℹ️ Default users already exist in database
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 🔧 Fixing existing users language permissions...
0|mapestat | Found 1 regular users to fix
0|mapestat | ✅ Finished fixing existing users language permissions
0|mapestat | 📁 Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:12:20 AM [express] serving on port 5000

^C
root@srv1027249:/var/www/mapestate.net# pm2 restart mapestate
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [mapestate](ids: [ 0 ])
[PM2] [mapestate](0) ✓
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapestate          │ fork     │ 1    │ online    │ 0%       │ 23.1mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@srv1027249:/var/www/mapestate.net# pm2 logs mapestate --lines 100
[TAILING] Tailing last 100 lines for [mapestate] process (change the value with --lines option)
/root/.pm2/logs/mapestate-error.log last 100 lines:
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database
0|mapestat | ❌ Failed to connect to MySQL VPS database:
0|mapestat |    Error: Error: No MySQL database configured. Set MYSQL_URL or individual MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, and MYSQL_DATABASE environment variables.
0|mapestat | ⚠️ No database configured, using in-memory storage for development
0|mapestat | 💡 Set MYSQL_URL environment variable to use a database

/root/.pm2/logs/mapestate-out.log last 100 lines:
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Created upload directory: /var/www/mapestate.net/server/uploads/customer
0|mapestat | 📁 Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:09:29 AM [express] serving on port 5000
0|mapestat | ✅ Default users initialized in MemStorage (development mode)
0|mapestat | 🔑 Use 'admin' and 'john_agent' usernames to login
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts .env
0|mapestat | 
0|mapestat | 💾 Using MemStorage (in-memory) - DEVELOPMENT ONLY
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 📁 Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:11:05 AM [express] serving on port 5000
0|mapestat | ✅ Default users initialized in MemStorage (development mode)
0|mapestat | 🔑 Use 'admin' and 'john_agent' usernames to login
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💓 Database connection is healthy
0|mapestat | ✅ MySQL database initialized successfully
0|mapestat | 🔗 Using MySQL DatabaseStorage
0|mapestat | ℹ️ Default users already exist in database
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 🔧 Fixing existing users language permissions...
0|mapestat | Found 1 regular users to fix
0|mapestat | ✅ Finished fixing existing users language permissions
0|mapestat | 📁 Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:12:20 AM [express] serving on port 5000
0|mapestat | 
0|mapestat | > rest-express@1.0.0 dev
0|mapestat | > NODE_ENV=development tsx server/index.ts
0|mapestat | 
0|mapestat | 🔄 Connecting to MySQL VPS database...
0|mapestat | ✅ MySQL VPS connection established successfully
0|mapestat | 🔍 Testing database connection...
0|mapestat | 💓 Database connection is healthy
0|mapestat | ✅ MySQL database initialized successfully
0|mapestat | 🔗 Using MySQL DatabaseStorage
0|mapestat | ℹ️ Default users already exist in database
0|mapestat | 🔧 Running startup fix for user language permissions...
0|mapestat | 🔧 Fixing existing users language permissions...
0|mapestat | Found 1 regular users to fix
0|mapestat | ✅ Finished fixing existing users language permissions
0|mapestat | 📁 Serving uploads from: /var/www/mapestate.net/server/uploads
0|mapestat | 6:13:18 AM [express] serving on port 5000

^X^C
root@srv1027249:/var/www/mapestate.net# # Check nginx error logs
sudo tail -n 50 /var/log/nginx/error.log

# Also check the nginx configuration
sudo cat /etc/nginx/sites-available/mapestate.net
2025/10/18 06:13:40 [crit] 127623#127623: *56 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:13:40 [crit] 127623#127623: *56 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:13:40 [crit] 127623#127623: *56 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:13:40 [error] 127623#127623: *56 rewrite or internal redirection cycle while internally redirecting to "/index.html", client: 130.193.217.11, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/favicon.ico" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/favicon.ico" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [crit] 127623#127623: *57 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:13:41 [error] 127623#127623: *57 rewrite or internal redirection cycle while internally redirecting to "/index.html", client: 130.193.217.11, server: mapestate.net, request: "GET /favicon.ico HTTP/1.1", host: "mapestate.net", referrer: "https://mapestate.net/"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [crit] 127623#127623: *58 stat() "/root/dailynewscrypto.net/dist/index.html" failed (13: Permission denied), client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
2025/10/18 06:14:33 [error] 127623#127623: *58 rewrite or internal redirection cycle while internally redirecting to "/index.html", client: 18.163.119.58, server: mapestate.net, request: "GET / HTTP/1.1", host: "mapestate.net"
server { server_name mapestate.net www.mapestate.net; root 
    /root/dailynewscrypto.net/dist; index index.html;

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;

    # Gzip compression
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API proxy if you have backend
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/mapestate.net/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/mapestate.net/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


}
server {
    if ($host = www.mapestate.net) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    if ($host = mapestate.net) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    listen 80;
    server_name mapestate.net www.mapestate.net;
    return 404; # managed by Certbot




}
root@srv1027249:/var/www/mapestate.net# ls -la /var/www/mapestate.net/dist/
total 224
drwxr-xr-x  3 www-data www-data   4096 Oct 18 06:08 .
drwxr-xr-x 10 www-data www-data   4096 Oct 18 06:12 ..
-rwxr-xr-x  1 www-data www-data 213371 Oct 18 06:08 index.js
drwxr-xr-x  3 www-data www-data   4096 Oct 18 06:08 public
root@srv1027249:/var/www/mapestate.net# 