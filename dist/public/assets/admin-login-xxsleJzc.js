import{c as S,d as C,a as E,n as L,r as c,j as e,B as x}from"./index-gVtgMtKL.js";import{C as F,b as I,c as z,d as P,a as A}from"./card-C2dwsEa1.js";import{u as M,F as R,a as h,b,c as p,d as f,e as j,z as m,t as T}from"./index-Cm5aqmom.js";import{I as w}from"./input-CLWbKIjf.js";import{S as q}from"./shield-Dp7uVQGy.js";import{E as B}from"./eye-off-DPIeQAry.js";import{E as O}from"./label-BoyKRg9x.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),V=m.object({username:m.string().min(1,"Username is required"),password:m.string().min(1,"Password is required")});function W(){const[,a]=C(),{login:N,user:t,isLoading:n}=E(),{toast:k}=L(),[d,v]=c.useState(!1),[i,g]=c.useState(!1),o=M({resolver:T(V),defaultValues:{username:"",password:""}});if(c.useEffect(()=>{if(!n&&t){const r=t.role;a(r==="admin"||r==="super_admin"?"/admin/dashboard":r==="user"?"/customer/dashboard":"/dashboard")}},[t,n,a]),n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900 dark:to-orange-800",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-orange-600 border-t-transparent rounded-full"})});if(t)return null;const y=async r=>{var u;if(!i){g(!0);try{const s=await N(r.username,r.password),l=(u=s==null?void 0:s.user)==null?void 0:u.role;a(l==="admin"||l==="super_admin"?"/admin/dashboard":l==="user"?"/customer/dashboard":"/dashboard")}catch(s){k({title:"Error",description:s.message||"Login failed",variant:"destructive"})}finally{g(!1)}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900 dark:to-orange-800 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(F,{className:"border-0 bg-white/90 dark:bg-orange-800/90 backdrop-blur-sm",children:[e.jsxs(I,{className:"space-y-4 pb-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-3 rounded-full bg-orange-100 dark:bg-orange-900/50",children:e.jsx(q,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})})}),e.jsx(z,{className:"text-2xl font-bold text-center text-orange-900 dark:text-orange-100",children:"MapEstate Admin"}),e.jsx(P,{className:"text-center text-orange-600 dark:text-orange-400",children:"Sign in to access your admin dashboard"})]}),e.jsxs(A,{children:[e.jsx(R,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(y),className:"space-y-6",children:[e.jsx(h,{control:o.control,name:"username",render:({field:r})=>e.jsxs(b,{children:[e.jsx(p,{className:"text-orange-700 dark:text-orange-300",children:"Username"}),e.jsx(f,{children:e.jsx(w,{...r,placeholder:"Enter your username",className:"h-12 bg-white dark:bg-orange-900/50 border-orange-300 dark:border-orange-600 focus:border-orange-500 focus:ring-orange-500","data-testid":"input-username",autoComplete:"username"})}),e.jsx(j,{})]})}),e.jsx(h,{control:o.control,name:"password",render:({field:r})=>e.jsxs(b,{children:[e.jsx(p,{className:"text-orange-700 dark:text-orange-300",children:"Password"}),e.jsx(f,{children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{...r,type:d?"text":"password",placeholder:"Enter your password",className:"h-12 pr-12 bg-white dark:bg-orange-900/50 border-orange-300 dark:border-orange-600 focus:border-orange-500 focus:ring-orange-500","data-testid":"input-password",autoComplete:"current-password"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-12 px-3 py-2 hover:bg-transparent",onClick:()=>v(!d),"data-testid":"button-toggle-password",children:d?e.jsx(B,{className:"h-4 w-4 text-orange-400"}):e.jsx(O,{className:"h-4 w-4 text-orange-400"})})]})}),e.jsx(j,{})]})}),e.jsx(x,{type:"submit",className:"w-full h-12 bg-orange-600 hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-700 text-white font-semibold transition-all duration-200",disabled:i,"data-testid":"button-login",children:i?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Sign In"})]})})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-orange-200 dark:border-orange-700",children:e.jsx("p",{className:"text-xs text-center text-orange-500 dark:text-orange-400",children:"This is a secure admin area. Only authorized personnel should access this portal."})})]})]})})})}export{W as default};
