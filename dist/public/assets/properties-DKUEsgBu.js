import{c as M,u as Q,r as i,j as e,B as g}from"./index-gVtgMtKL.js";import{P as X}from"./property-card-B4-HTgGt.js";import{c as Y,S as ee,F as z,b as se}from"./meta-enhancement-5I2taBql.js";import{B as j}from"./badge-BqUsHcl3.js";import{C as S,a as E}from"./card-C2dwsEa1.js";import{S as y,a as f,b as N,c as v,d as t}from"./select-BY5_QmCp.js";import{I as ae}from"./input-CLWbKIjf.js";import{S as te}from"./SEOHead-CiHAdMXs.js";import{a as le}from"./use-properties-BAMJa5MG.js";import{T as q,B as D,M as K}from"./tag-DcfsnTHY.js";import{K as U,H as P}from"./key-gsuhbt2y.js";import{B as m,a as u}from"./bed-Bvsx4--5.js";import{M as G}from"./map-pin-BZWIKE3O.js";import"./square-CK4v9LDE.js";import"./user-Bs_15JvR.js";import"./lightbulb-BR7E-NTM.js";import"./Combination-CC3rbWt6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=M("Castle",[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=M("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=M("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);function ke(){var A,R,H;const{t:ce,language:x}=Q(),[s,h]=i.useState({sortBy:"date",sortOrder:"desc",limit:20,offset:0,language:x}),[n,T]=i.useState([0,1e6]),[k,B]=i.useState(""),[b,L]=i.useState(null),[w,V]=i.useState("grid"),{data:r,isLoading:$}=le(s);i.useEffect(()=>{h(a=>({...a,language:x,offset:0}))},[x]),i.useEffect(()=>{const a=setTimeout(()=>{h(l=>({...l,city:k.trim()||void 0,offset:0}))},500);return()=>clearTimeout(a)},[k]);const o=i.useCallback((a,l)=>{h(p=>({...p,[a]:l==="all"||l==="any"||l===""?void 0:l,offset:0}))},[]);i.useEffect(()=>{const a=setTimeout(()=>{h(l=>({...l,minPrice:n[0]>0?n[0]:void 0,maxPrice:n[1]<1e6?n[1]:void 0,offset:0}))},300);return()=>clearTimeout(a)},[n]);const Z=a=>{L(a),h(l=>({...l,...a.filters}))},I=i.useCallback(()=>{h({sortBy:"date",sortOrder:"desc",limit:20,offset:0,language:x}),T([0,1e6]),B(""),L(null)},[x]),d=b?b.results:r||[],_=()=>{const a=(r==null?void 0:r.length)||0,l=s.listingType||"all",p=s.type||"all",O=s.city||"Kurdistan";return{"@context":"https://schema.org","@type":"ItemList",name:`Properties for ${l==="all"?"Sale & Rent":l} in ${O}`,description:`Browse ${a} ${p!=="all"?p:"property"} listings for ${l==="all"?"sale and rent":l} in ${O}, Iraq. Find your perfect home with detailed property information and expert agents.`,numberOfItems:a,itemListElement:(d==null?void 0:d.slice(0,10).map((c,J)=>({"@type":"ListItem",position:J+1,item:{"@type":"RealEstateListing",name:c.title,url:`${window.location.origin}/property/${c.id}`,image:c.images&&c.images.length>0?c.images.map(C=>C.startsWith("http")?C:`${window.location.origin}${C}`):[],address:{"@type":"PostalAddress",streetAddress:c.address,addressLocality:c.city,addressCountry:c.country},offers:{"@type":"Offer",priceCurrency:c.currency||"USD",price:c.price,availability:"https://schema.org/InStock",priceValidUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}}})))||[]}},F=i.useMemo(()=>{const a=(r==null?void 0:r.length)||0;return Y(s,a)},[s,r==null?void 0:r.length,x]);return e.jsxs("div",{className:"properties-page min-h-screen bg-background",children:[e.jsx(te,{title:F.title,description:F.description,keywords:F.keywords.join(", "),ogImage:F.ogImage||(r&&r.length>0?(A=r[0].images)==null?void 0:A[0]:`${window.location.origin}/mapestate-og-image.jpg`),canonicalUrl:void 0,structuredData:_(),breadcrumbs:[{name:"Home",url:"/"},{name:"Properties",url:"/properties"}]}),e.jsx("div",{className:"bg-muted/30 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4","data-testid":"properties-title",children:"Properties for Sale & Rent"}),e.jsx(ee,{onResults:Z})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx(S,{className:"sticky top-8",children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Filters"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:I,"data-testid":"clear-filters",children:"Clear"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Listing Type"}),e.jsxs(y,{value:s.listingType||"",onValueChange:a=>o("listingType",a||void 0),children:[e.jsx(f,{"data-testid":"listing-type-select",children:e.jsx(N,{placeholder:"All Types"})}),e.jsxs(v,{children:[e.jsx(t,{value:"all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"All Types"]})}),e.jsx(t,{value:"sale",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"For Sale"]})}),e.jsx(t,{value:"rent",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"For Rent"]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Type"}),e.jsxs(y,{value:s.type||"",onValueChange:a=>o("type",a||void 0),children:[e.jsx(f,{"data-testid":"property-type-select",children:e.jsx(N,{placeholder:"All Properties"})}),e.jsxs(v,{children:[e.jsx(t,{value:"all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4",style:{color:"#FF7800"}}),"All Properties"]})}),e.jsx(t,{value:"house",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4",style:{color:"#FF7800"}}),"House"]})}),e.jsx(t,{value:"apartment",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4",style:{color:"#FF7800"}}),"Apartment"]})}),e.jsx(t,{value:"villa",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4",style:{color:"#FF7800"}}),"Villa"]})}),e.jsx(t,{value:"land",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4",style:{color:"#FF7800"}}),"Land"]})})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Price Range: $",n[0].toLocaleString()," - $",n[1].toLocaleString()]}),e.jsx(se,{value:n,onValueChange:T,max:1e6,step:1e4,className:"mt-2","data-testid":"price-range-slider"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bedrooms"}),e.jsxs(y,{value:((R=s.bedrooms)==null?void 0:R.toString())||"",onValueChange:a=>o("bedrooms",a?parseInt(a):void 0),children:[e.jsx(f,{"data-testid":"bedrooms-select",children:e.jsx(N,{placeholder:"Any"})}),e.jsxs(v,{children:[e.jsx(t,{value:"any",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"Any"]})}),e.jsx(t,{value:"1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"1+"]})}),e.jsx(t,{value:"2",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"2+"]})}),e.jsx(t,{value:"3",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"3+"]})}),e.jsx(t,{value:"4",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"4+"]})}),e.jsx(t,{value:"5",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:"#FF7800"}}),"5+"]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bathrooms"}),e.jsxs(y,{value:((H=s.bathrooms)==null?void 0:H.toString())||"",onValueChange:a=>o("bathrooms",a?parseInt(a):void 0),children:[e.jsx(f,{"data-testid":"bathrooms-select",children:e.jsx(N,{placeholder:"Any"})}),e.jsxs(v,{children:[e.jsx(t,{value:"any",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4",style:{color:"#FF7800"}}),"Any"]})}),e.jsx(t,{value:"1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4",style:{color:"#FF7800"}}),"1+"]})}),e.jsx(t,{value:"2",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4",style:{color:"#FF7800"}}),"2+"]})}),e.jsx(t,{value:"3",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4",style:{color:"#FF7800"}}),"3+"]})}),e.jsx(t,{value:"4",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4",style:{color:"#FF7800"}}),"4+"]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"City"}),e.jsx(ae,{placeholder:"Enter city...",value:k,onChange:a=>B(a.target.value),"data-testid":"city-input"})]})]}),e.jsx("div",{className:"mt-4",children:(s.type||s.listingType||s.bedrooms||s.bathrooms||s.city||s.minPrice||s.maxPrice)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Active Filters:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.type&&e.jsxs(j,{className:"flex items-center gap-1",style:{backgroundColor:"#bdd479",color:"#000"},children:[s.type==="house"&&e.jsx(P,{className:"h-3 w-3"}),s.type==="apartment"&&e.jsx(D,{className:"h-3 w-3"}),s.type==="villa"&&e.jsx(W,{className:"h-3 w-3"}),s.type==="land"&&e.jsx(K,{className:"h-3 w-3"}),s.type==="house"&&"House",s.type==="apartment"&&"Apartment",s.type==="villa"&&"Villa",s.type==="land"&&"Land"]}),s.listingType&&e.jsxs(j,{className:"flex items-center gap-1",style:{backgroundColor:"#bdd479",color:"#000"},children:[s.listingType==="sale"?e.jsx(q,{className:"h-3 w-3"}):e.jsx(U,{className:"h-3 w-3"}),s.listingType==="sale"?"For Sale":"For Rent"]}),s.bedrooms&&e.jsxs(j,{className:"flex items-center gap-1",style:{backgroundColor:"#bdd479",color:"#000"},children:[e.jsx(m,{className:"h-3 w-3"}),s.bedrooms,"+ Beds"]}),s.bathrooms&&e.jsxs(j,{className:"flex items-center gap-1",style:{backgroundColor:"#bdd479",color:"#000"},children:[e.jsx(u,{className:"h-3 w-3"}),s.bathrooms,"+ Baths"]}),s.city&&e.jsxs(j,{className:"flex items-center gap-1",style:{backgroundColor:"#bdd479",color:"#000"},children:[e.jsx(G,{className:"h-3 w-3"}),s.city]}),(s.minPrice||s.maxPrice)&&e.jsxs(j,{style:{backgroundColor:"#bdd479",color:"#000"},children:["$",s.minPrice?s.minPrice.toLocaleString():"0"," ","- $",s.maxPrice?s.maxPrice.toLocaleString():"1M+"]})]})]})})]})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"results-count",children:$?"Loading...":`${d.length} Properties Found`}),b&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:['Search: "',b.query,'"']})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(y,{value:`${s.sortBy}-${s.sortOrder}`,onValueChange:a=>{const[l,p]=a.split("-");o("sortBy",l),o("sortOrder",p)},children:[e.jsx(f,{className:"w-48","data-testid":"sort-select",children:e.jsx(N,{})}),e.jsxs(v,{children:[e.jsx(t,{value:"date-desc",children:"Newest First"}),e.jsx(t,{value:"date-asc",children:"Oldest First"}),e.jsx(t,{value:"price-asc",children:"Price: Low to High"}),e.jsx(t,{value:"price-desc",children:"Price: High to Low"}),e.jsx(t,{value:"views-desc",children:"Most Popular"})]})]}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(g,{variant:w==="grid"?"default":"ghost",size:"sm",onClick:()=>V("grid"),"data-testid":"grid-view-button",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(g,{variant:w==="list"?"default":"ghost",size:"sm",onClick:()=>V("list"),"data-testid":"list-view-button",children:e.jsx(ie,{className:"h-4 w-4"})})]})]})]}),$?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,l)=>e.jsxs(S,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-muted"}),e.jsxs(E,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})]},l))}):d.length>0?e.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:d.map(a=>e.jsx(X,{property:a,className:w==="list"?"flex flex-row":""},a.id))}):e.jsxs(S,{className:"p-8 text-center",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or filters to find more properties."}),e.jsx(g,{onClick:I,"data-testid":"clear-filters-no-results",children:"Clear All Filters"})]}),d.length>0&&d.length>=(s.limit||20)&&e.jsx("div",{className:"text-center mt-8",children:e.jsx(g,{onClick:()=>o("limit",(s.limit||20)+20),"data-testid":"load-more-button",children:"Load More Properties"})})]})]})})]})}export{ke as default};
